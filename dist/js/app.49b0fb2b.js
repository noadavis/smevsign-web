(function(e){function t(t){for(var a,l,s=t[0],i=t[1],o=t[2],d=0,p=[];d<s.length;d++)l=s[d],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&p.push(c[l][0]),c[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,o||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var i=n[s];0!==c[i]&&(a=!1)}a&&(r.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},c={app:0},r=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var o=0;o<s.length;o++)t(s[o]);var u=i;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1589:function(module,exports,__webpack_require__){var _typeof=__webpack_require__("7037").default;__webpack_require__("d3b7"),__webpack_require__("ac1f"),__webpack_require__("466d"),__webpack_require__("5319"),__webpack_require__("a434"),__webpack_require__("fb6a"),__webpack_require__("b0c0"),__webpack_require__("25f0"),function(){if(!window.cadesplugin){var pluginObject,plugin_resolved=0,plugin_reject,plugin_resolve,isOpera=0,isFireFox=0,isSafari=0,isYandex=0,canPromise=!!window.Promise,cadesplugin_loaded_event_recieved=!1,cadesplugin;cadesplugin=canPromise?new Promise((function(e,t){plugin_resolve=e,plugin_reject=t})):{};var browserSpecs=check_browser(),ru_cryptopro_npcades_10_native_bridge={callbacksCount:1,callbacks:{},resultForCallback:function(e,t){var n=ru_cryptopro_npcades_10_native_bridge.callbacks[e];n&&n.apply(null,t)},call:function(e,t,n){var a=n&&"function"===typeof n,c=a?ru_cryptopro_npcades_10_native_bridge.callbacksCount++:0;a&&(ru_cryptopro_npcades_10_native_bridge.callbacks[c]=n);var r=document.createElement("IFRAME"),l=new Array("_CPNP_handle");try{r.setAttribute("src","cpnp-js-call:"+e+":"+c+":"+encodeURIComponent(JSON.stringify(t,l)))}catch(s){alert(s)}document.documentElement.appendChild(r),r.parentNode.removeChild(r),r=null}};cadesplugin.JSModuleVersion="2.3.1",cadesplugin.async_spawn=async_spawn,cadesplugin.set=set_pluginObject,cadesplugin.set_log_level=set_log_level,cadesplugin.getLastError=getLastError,cadesplugin.is_capilite_enabled=is_capilite_enabled,isNativeMessageSupported()&&(cadesplugin.CreateObjectAsync=CreateObjectAsync,cadesplugin.ReleasePluginObjects=ReleasePluginObjects),isNativeMessageSupported()||(cadesplugin.CreateObject=CreateObject),window.cadesplugin_load_timeout?setTimeout(check_load_timeout,window.cadesplugin_load_timeout):setTimeout(check_load_timeout,2e4),set_constantValues(),cadesplugin.current_log_level=cadesplugin.LOG_LEVEL_ERROR,window.cadesplugin=cadesplugin,check_plugin_working()}function check_browser(){var e,t=navigator.userAgent,n=t.match(/(opera|yabrowser|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:e[1]||""}):"Chrome"===n[1]&&(e=t.match(/\b(OPR|Edg|YaBrowser)\/(\d+)/),null!=e)?{name:e[1].replace("OPR","Opera"),version:e[2]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})}function cpcsp_console_log(e,t){if("undefined"!==typeof console)return e<=cadesplugin.current_log_level?(e===cadesplugin.LOG_LEVEL_DEBUG&&console.log("DEBUG: %s",t),e===cadesplugin.LOG_LEVEL_INFO&&console.info("INFO: %s",t),void(e===cadesplugin.LOG_LEVEL_ERROR&&console.error("ERROR: %s",t))):void 0}function set_log_level(e){e===cadesplugin.LOG_LEVEL_DEBUG||e===cadesplugin.LOG_LEVEL_INFO||e===cadesplugin.LOG_LEVEL_ERROR?(cadesplugin.current_log_level=e,cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_DEBUG&&cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = DEBUG"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_INFO&&cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = INFO"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_ERROR&&cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = ERROR"),isNativeMessageSupported()&&(cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_DEBUG&&window.postMessage("set_log_level=debug","*"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_INFO&&window.postMessage("set_log_level=info","*"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_ERROR&&window.postMessage("set_log_level=error","*"))):cpcsp_console_log(cadesplugin.LOG_LEVEL_ERROR,"cadesplugin_api.js: Incorrect log_level: "+e)}function set_constantValues(){cadesplugin.CAPICOM_MEMORY_STORE=0,cadesplugin.CAPICOM_LOCAL_MACHINE_STORE=1,cadesplugin.CAPICOM_CURRENT_USER_STORE=2,cadesplugin.CADESCOM_MEMORY_STORE=0,cadesplugin.CADESCOM_LOCAL_MACHINE_STORE=1,cadesplugin.CADESCOM_CURRENT_USER_STORE=2,cadesplugin.CADESCOM_CONTAINER_STORE=100,cadesplugin.CAPICOM_MY_STORE="My",cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED=2,cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED=0,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING=1,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE=2,cadesplugin.CADESCOM_XADES_DEFAULT=16,cadesplugin.CADESCOM_XADES_BES=32,cadesplugin.CADESCOM_XADES_T=80,cadesplugin.CADESCOM_XADES_X_LONG_TYPE_1=1488,cadesplugin.CADESCOM_XMLDSIG_TYPE=0,cadesplugin.XmlDsigGost3410UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411",cadesplugin.XmlDsigGost3411UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr3411",cadesplugin.XmlDsigGost3410Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411",cadesplugin.XmlDsigGost3411Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411",cadesplugin.XmlDsigGost3411Url2012256="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-256",cadesplugin.XmlDsigGost3410Url2012256="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-256",cadesplugin.XmlDsigGost3411Url2012512="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-512",cadesplugin.XmlDsigGost3410Url2012512="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-512",cadesplugin.CADESCOM_CADES_DEFAULT=0,cadesplugin.CADESCOM_CADES_BES=1,cadesplugin.CADESCOM_CADES_T=5,cadesplugin.CADESCOM_CADES_X_LONG_TYPE_1=93,cadesplugin.CADESCOM_PKCS7_TYPE=65535,cadesplugin.CADESCOM_ENCODE_BASE64=0,cadesplugin.CADESCOM_ENCODE_BINARY=1,cadesplugin.CADESCOM_ENCODE_ANY=-1,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT=0,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN=1,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY=2,cadesplugin.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME=0,cadesplugin.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME=1,cadesplugin.CAPICOM_CERTIFICATE_FIND_SHA1_HASH=0,cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1,cadesplugin.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME=2,cadesplugin.CAPICOM_CERTIFICATE_FIND_ROOT_NAME=3,cadesplugin.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME=4,cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENSION=5,cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY=6,cadesplugin.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY=7,cadesplugin.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY=8,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_VALID=9,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID=10,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED=11,cadesplugin.CAPICOM_CERTIFICATE_FIND_KEY_USAGE=12,cadesplugin.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE=128,cadesplugin.CAPICOM_PROPID_ENHKEY_USAGE=9,cadesplugin.CAPICOM_OID_OTHER=0,cadesplugin.CAPICOM_OID_KEY_USAGE_EXTENSION=10,cadesplugin.CAPICOM_EKU_CLIENT_AUTH=2,cadesplugin.CAPICOM_EKU_SMARTCARD_LOGON=5,cadesplugin.CAPICOM_EKU_OTHER=0,cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0,cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1,cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=2,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=2,cadesplugin.CADESCOM_ATTRIBUTE_OTHER=-1,cadesplugin.CADESCOM_STRING_TO_UCS2LE=0,cadesplugin.CADESCOM_BASE64_TO_BINARY=1,cadesplugin.CADESCOM_DISPLAY_DATA_NONE=0,cadesplugin.CADESCOM_DISPLAY_DATA_CONTENT=1,cadesplugin.CADESCOM_DISPLAY_DATA_ATTRIBUTE=2,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC2=0,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC4=1,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_DES=2,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_3DES=3,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_AES=4,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89=25,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA1=0,cadesplugin.CADESCOM_HASH_ALGORITHM_MD2=1,cadesplugin.CADESCOM_HASH_ALGORITHM_MD4=2,cadesplugin.CADESCOM_HASH_ALGORITHM_MD5=3,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_256=4,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_384=5,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_512=6,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411=100,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256=101,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512=102,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_HMAC=110,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256_HMAC=111,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512_HMAC=112,cadesplugin.LOG_LEVEL_DEBUG=4,cadesplugin.LOG_LEVEL_INFO=2,cadesplugin.LOG_LEVEL_ERROR=1,cadesplugin.CADESCOM_AllowNone=0,cadesplugin.CADESCOM_AllowNoOutstandingRequest=1,cadesplugin.CADESCOM_AllowUntrustedCertificate=2,cadesplugin.CADESCOM_AllowUntrustedRoot=4,cadesplugin.CADESCOM_SkipInstallToStore=268435456,cadesplugin.ENABLE_CARRIER_TYPE_CSP=1,cadesplugin.ENABLE_CARRIER_TYPE_FKC_NO_SM=2,cadesplugin.ENABLE_CARRIER_TYPE_FKC_SM=4,cadesplugin.ENABLE_ANY_CARRIER_TYPE=7,cadesplugin.DISABLE_EVERY_CARRIER_OPERATION=0,cadesplugin.ENABLE_CARRIER_OPEN_ENUM=1,cadesplugin.ENABLE_CARRIER_CREATE=2,cadesplugin.ENABLE_ANY_OPERATION=3,cadesplugin.CADESCOM_PRODUCT_CSP=0,cadesplugin.CADESCOM_PRODUCT_OCSP=1,cadesplugin.CADESCOM_PRODUCT_TSP=2,cadesplugin.MEDIA_TYPE_REGISTRY=1,cadesplugin.MEDIA_TYPE_HDIMAGE=2,cadesplugin.MEDIA_TYPE_CLOUD=4,cadesplugin.MEDIA_TYPE_SCARD=8,cadesplugin.XCN_CRYPT_STRING_BASE64HEADER=0,cadesplugin.AT_KEYEXCHANGE=1,cadesplugin.AT_SIGNATURE=2}function async_spawn(e){function t(e,t){var r;try{r=n[e](t)}catch(l){return Promise.reject(l)}return r.done?r.value:Promise.resolve(r.value).then(a,c)}var n=e(Array.prototype.slice.call(arguments,1)),a=t.bind(t,"next"),c=t.bind(t,"throw");return a()}function isIE(){return"IE"===browserSpecs.name||"MSIE"===browserSpecs.name}function isIOS(){return navigator.userAgent.match(/ipod/i)||navigator.userAgent.match(/ipad/i)||navigator.userAgent.match(/iphone/i)}function isNativeMessageSupported(){return!isIE()&&("Edg"===browserSpecs.name||("YaBrowser"===browserSpecs.name?(isYandex=!0,!0):"Opera"===browserSpecs.name?(isOpera=!0,browserSpecs.version>=33):"Firefox"===browserSpecs.name?(isFireFox=!0,browserSpecs.version>=52):"Chrome"===browserSpecs.name?browserSpecs.version>=42:"Safari"===browserSpecs.name?(isSafari=!0,browserSpecs.version>=12):void 0))}function CreateObject(e){if(isIOS())return call_ru_cryptopro_npcades_10_native_bridge("CreateObject",[e]);if(isIE()){if(e.match(/X509Enrollment/i))try{var t=document.getElementById("webClassFactory");return t.CreateObject(e)}catch(a){try{var n=document.getElementById("certEnrollClassFactory");return n.CreateObject(e)}catch(c){throw"Для создания обьектов X509Enrollment следует настроить веб-узел на использование проверки подлинности по протоколу HTTPS"}}try{n=document.getElementById("webClassFactory");return n.CreateObject(e)}catch(a){return new ActiveXObject(e)}}return pluginObject.CreateObject(e)}function decimalToHexString(e){return e<0&&(e=4294967295+e+1),e.toString(16).toUpperCase()}function GetMessageFromException(e){var t=e.message;return t?e.number&&(t+=" (0x"+decimalToHexString(e.number)+")"):t=e,t}function getLastError(e){if(isNativeMessageSupported()||isIE()||isIOS())return GetMessageFromException(e);try{return pluginObject.getLastError()}catch(t){return GetMessageFromException(e)}}function ReleasePluginObjects(){return cpcsp_chrome_nmcades.ReleasePluginObjects()}function CreateObjectAsync(e){return pluginObject.CreateObjectAsync(e)}function call_ru_cryptopro_npcades_10_native_bridge(functionName,array){var tmpobj,ex;if(ru_cryptopro_npcades_10_native_bridge.call(functionName,array,(function(e,response){ex=e;var str="tmpobj="+response;eval(str),"string"===typeof tmpobj&&(tmpobj=tmpobj.replace(/\\\n/gm,"\n"),tmpobj=tmpobj.replace(/\\\r/gm,"\r"))})),ex)throw ex;return tmpobj}function show_firefox_missing_extension_dialog(){if(!window.cadesplugin_skip_extension_install){var e=document.createElement("div");e.id="cadesplugin_ovr",e.style="visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)",e.innerHTML="<div id='cadesplugin_ovr_item' style='position:relative; width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'><button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X</button><p>Для работы КриптоПро ЭЦП Browser plugin на данном сайте необходимо расширение для браузера. Убедитесь, что оно у Вас включено или установите его.<p><a href='https://www.cryptopro.ru/sites/default/files/products/cades/extensions/firefox_cryptopro_extension_latest.xpi'>Скачать расширение</a></p></div>",document.getElementsByTagName("Body")[0].appendChild(e),document.getElementById("cadesplugin_close_install").addEventListener("click",(function(){plugin_loaded_error("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"})),e.addEventListener("click",(function(){plugin_loaded_error("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"})),e.style.visibility="visible"}}function firefox_or_safari_nmcades_onload(){cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded,plugin_loaded_error)}function nmcades_api_onload(){window.postMessage("cadesplugin_echo_request","*"),window.addEventListener("message",(function(e){if("string"===typeof e.data&&e.data.match("cadesplugin_loaded")&&!cadesplugin_loaded_event_recieved){if(isFireFox||isSafari){var t=e.data.substring(e.data.indexOf("url:")+4);if(!t.match("^moz-extension://[a-zA-Z0-9-]+/nmcades_plugin_api.js$")&&!t.match("^safari-extension://[a-zA-Z0-9-]+/[a-zA-Z0-9]+/nmcades_plugin_api.js$"))return cpcsp_console_log(cadesplugin.LOG_LEVEL_ERROR,'Bad url "'+t+'" for load CryptoPro Extension for CAdES Browser plug-in'),void plugin_loaded_error();var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",t),n.onerror=plugin_loaded_error,n.onload=firefox_or_safari_nmcades_onload,document.getElementsByTagName("head")[0].appendChild(n)}else cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded,plugin_loaded_error);cadesplugin_loaded_event_recieved=!0}}),!1)}function load_extension(){if(isFireFox||isSafari)nmcades_api_onload();else if(isOpera||isYandex){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js"),e.onerror=plugin_loaded_error,e.onload=nmcades_api_onload,document.getElementsByTagName("head")[0].appendChild(e)}else{e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js"),e.onerror=plugin_loaded_error,e.onload=nmcades_api_onload,document.getElementsByTagName("head")[0].appendChild(e)}}function load_npapi_plugin(){var e=document.createElement("object");if(e.setAttribute("id","cadesplugin_object"),e.setAttribute("type","application/x-cades"),e.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(e),pluginObject=document.getElementById("cadesplugin_object"),isIE()){var t=document.createElement("object");t.setAttribute("id","certEnrollClassFactory"),t.setAttribute("classid","clsid:884e2049-217d-11da-b2a4-000e7bbb2b09"),t.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(t);var n=document.createElement("object");n.setAttribute("id","webClassFactory"),n.setAttribute("classid","clsid:B04C8637-10BD-484E-B0DA-B8A039F60024"),n.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(n)}}function plugin_loaded(){plugin_resolved=1,canPromise?plugin_resolve():window.postMessage("cadesplugin_loaded","*")}function plugin_loaded_error(e){"undefined"!==typeof e&&"object"!==_typeof(e)||(e="Плагин недоступен"),plugin_resolved=1,canPromise?plugin_reject(e):window.postMessage("cadesplugin_load_error","*")}function check_load_timeout(){1!==plugin_resolved&&(isFireFox&&show_firefox_missing_extension_dialog(),plugin_resolved=1,canPromise?plugin_reject("Истекло время ожидания загрузки плагина"):window.postMessage("cadesplugin_load_error","*"))}function createPromise(e){return new Promise(e)}function check_npapi_plugin(){try{CreateObject("CAdESCOM.About");plugin_loaded()}catch(n){document.getElementById("cadesplugin_object").style.display="none";var e=navigator.mimeTypes["application/x-cades"];if(e){var t=e.enabledPlugin;plugin_loaded_error(t?"Плагин загружен, но не создаются обьекты":"Ошибка при загрузке плагина")}else plugin_loaded_error("Плагин недоступен")}}function check_plugin_working(){var e=document.createElement("div");e.innerHTML="\x3c!--[if lt IE 9]><i></i><![endif]--\x3e";var t=1===e.getElementsByTagName("i").length;t?plugin_loaded_error("Internet Explorer версии 8 и ниже не поддерживается"):isNativeMessageSupported()?load_extension():canPromise?"complete"===document.readyState?(load_npapi_plugin(),check_npapi_plugin()):window.addEventListener("load",(function(e){load_npapi_plugin(),check_npapi_plugin()}),!1):window.addEventListener("message",(function(e){"cadesplugin_echo_request"===e.data&&(load_npapi_plugin(),check_npapi_plugin())}),!1)}function set_pluginObject(e){pluginObject=e}function is_capilite_enabled(){return!("undefined"===typeof cadesplugin.EnableInternalCSP||!cadesplugin.EnableInternalCSP)}}()},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),c=n("6c02"),r={class:"card"},l=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"smevsign-web: демонстрация возможностей rest api smevsign")],-1),s={class:"card-content"},i={class:"card-body"},o=Object(a["f"])("p",null,"Для начала работы укажите адрес tomcat с smevsign",-1),u={class:"form-group row align-items-center"},d=Object(a["f"])("div",{class:"col-lg-2 col-2"},[Object(a["f"])("label",{class:"col-form-label"},"backendUrl")],-1),p={class:"col-lg-8 col-8"},b={class:"col-lg-2 col-2"},f=Object(a["f"])("i",{class:"fa fa-save"},null,-1),O=[f],m=Object(a["g"])("   "),g=Object(a["f"])("i",{class:"fa fa-trash"},null,-1),_=[g],v=Object(a["f"])("hr",null,null,-1),j=Object(a["f"])("p",null,[Object(a["f"])("i",{class:"fa fa-github"}),Object(a["g"])(),Object(a["f"])("a",{target:"_blank",href:"https://github.com/noadavis/smevsign"},"smevsign: rest api система подписания")],-1),h=Object(a["f"])("p",null,"git clone https://github.com/noadavis/smevsign.git",-1),C=Object(a["f"])("p",null,[Object(a["f"])("i",{class:"fa fa-github"}),Object(a["g"])(),Object(a["f"])("a",{target:"_blank",href:"https://github.com/noadavis/smevsign-web"},"smevsign-web: web интерфейс для smevsign")],-1),E=Object(a["f"])("p",null,"git clone https://github.com/noadavis/smevsign-web.git",-1);function A(e,t,n,c,f,g){return Object(a["s"])(),Object(a["e"])("div",r,[l,Object(a["f"])("div",s,[Object(a["f"])("div",i,[o,Object(a["f"])("div",u,[d,Object(a["f"])("div",p,[Object(a["G"])(Object(a["f"])("input",{type:"text",id:"backUrl",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.backUrl=e})},null,512),[[a["D"],c.backUrl]])]),Object(a["f"])("div",b,[Object(a["f"])("a",{href:"#",title:"Сохранить",class:"btn btn-primary btn-sm",onClick:t[1]||(t[1]=Object(a["H"])((function(){return c.saveBackendUrl&&c.saveBackendUrl.apply(c,arguments)}),["prevent"]))},O),m,Object(a["f"])("a",{href:"#",title:"Удалить",class:"btn btn-danger btn-sm",onClick:t[2]||(t[2]=Object(a["H"])((function(){return c.deleteBackendUrl&&c.deleteBackendUrl.apply(c,arguments)}),["prevent"]))},_)])]),v,j,h,C,E])])])}var y=n("1da1"),x=(n("96cf"),n("5502")),S={setup:function(){var e=Object(a["v"])(),t=Object(x["b"])();function n(){localStorage.setItem("backendUrl",e.value),t.dispatch("updateBackendUrl",e.value)}function c(){localStorage.removeItem("backendUrl"),t.dispatch("updateBackendUrl","http://127.0.0.1:8080/api/"),e.value="http://127.0.0.1:8080/api/"}return Object(a["q"])(Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.dispatch("updatePageHeader","Home"),e.value=t.getters.getBackendUrl;case 2:case"end":return n.stop()}}),n)})))),{saveBackendUrl:n,deleteBackendUrl:c,backUrl:e}}},T=n("d959"),I=n.n(T);const R=I()(S,[["render",A]]);var M=R,k={class:"card"},w=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"Создание и подпись xml по бизнес данным")],-1),D={class:"card-content"},P={class:"card-body"},N={class:"form form-horizontal"},U={class:"form-body"},L={class:"row"},H=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Подпись")],-1),G={class:"col-md-9 form-group"},F=["value"],B=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Схема СМЭВ3")],-1),V={class:"col-md-9 form-group"},Y=["value"],q=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Тип xml")],-1),X={class:"col-md-9 form-group"},z=Object(a["f"])("option",{value:"SendRequestRequest"},"SendRequestRequest",-1),J=[z],K={class:"col-md-3"},W=Object(a["f"])("label",null,"MessageId, uuid.v1",-1),Z={style:{float:"right"}},Q=Object(a["f"])("i",{class:"fa fa-lg fa-gear"},null,-1),$=[Q],ee={class:"col-md-9 form-group"},te=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Бизнес данные, в base64")],-1),ne={class:"col-md-9 form-group"},ae=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),ce={class:"col-md-9 form-group"},re=Object(a["f"])("i",{class:"fa fa-lg fa-indent"},null,-1),le=Object(a["g"])(" Форматировать"),se=[re,le],ie=Object(a["g"])("  "),oe=Object(a["f"])("i",{class:"fa fa-lg fa-dedent"},null,-1),ue=Object(a["g"])(" Минимизировать"),de=[oe,ue],pe=Object(a["g"])("     "),be=Object(a["f"])("i",{class:"fa fa-lg fa-file-archive-o"},null,-1),fe=Object(a["g"])(" Текст в base64"),Oe=[be,fe],me=Object(a["g"])("  "),ge=Object(a["f"])("i",{class:"fa fa-lg fa-file-text-o"},null,-1),_e=Object(a["g"])(" base64 в текст"),ve=[ge,_e],je=Object(a["f"])("hr",null,null,-1),he=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),Ce={class:"col-md-9 form-group"},Ee={class:"form-check"},Ae={class:"checkbox"},ye=Object(a["f"])("label",{for:"usepersonal"},"Подписать бизнес данные пользовательской подписью",-1),xe={key:0,class:"formRow"},Se=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Пользовательская подпись")],-1),Te={class:"col-md-9 form-group"},Ie=["value"],Re=Object(a["f"])("hr",null,null,-1),Me=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),ke={class:"col-md-9 form-group"},we=Object(a["f"])("hr",null,null,-1),De=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Результат")],-1),Pe={class:"col-md-9 form-group"},Ne=Object(a["f"])("p",{style:{"padding-top":"20px"}},[Object(a["f"])("a",{target:"_blank",href:"http://qs.cryptopro.ru/SVS/Verify/"},"Проверка подписанной xml")],-1);function Ue(e,t,n,c,r,l){var s=Object(a["x"])("JsonButton");return Object(a["s"])(),Object(a["e"])("div",k,[w,Object(a["f"])("div",D,[Object(a["f"])("div",P,[Object(a["f"])("form",N,[Object(a["f"])("div",U,[Object(a["f"])("div",L,[H,Object(a["f"])("div",G,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"container",name:"container","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.container=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(c.containers.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,F)})),128))],512),[[a["C"],c.container]])]),B,Object(a["f"])("div",V,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"scheme",name:"scheme","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.scheme=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(c.smevscheme.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,Y)})),128))],512),[[a["C"],c.scheme]])]),q,Object(a["f"])("div",X,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"xmltype",name:"xmltype","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.xmltype=e})},J,512),[[a["C"],c.xmltype]])]),Object(a["f"])("div",K,[W,Object(a["f"])("div",Z,[Object(a["f"])("a",{onClick:t[3]||(t[3]=Object(a["H"])((function(){return c.GenerateUuid&&c.GenerateUuid.apply(c,arguments)}),["prevent"])),class:"btn btn-info btn-sm me-1 mb-1"},$)])]),Object(a["f"])("div",ee,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"uuid",name:"uuid","onUpdate:modelValue":t[4]||(t[4]=function(e){return c.uuid=e})},null,512),[[a["D"],c.uuid]])]),te,Object(a["f"])("div",ne,[Object(a["G"])(Object(a["f"])("textarea",{id:"bdata",class:"form-control",name:"bdata","onUpdate:modelValue":t[5]||(t[5]=function(e){return c.bdata=e}),spellcheck:"false",style:{height:"250px"}},null,512),[[a["D"],c.bdata]])]),ae,Object(a["f"])("div",ce,[Object(a["f"])("a",{class:"btn btn-primary",onClick:t[6]||(t[6]=Object(a["H"])((function(){return c.TextFormat&&c.TextFormat.apply(c,arguments)}),["prevent"])),id:"xml"},se),ie,Object(a["f"])("a",{class:"btn btn-primary",onClick:t[7]||(t[7]=Object(a["H"])((function(){return c.TextMinimize&&c.TextMinimize.apply(c,arguments)}),["prevent"])),id:"xmlmin"},de),pe,Object(a["f"])("a",{class:"btn btn-primary",onClick:t[8]||(t[8]=Object(a["H"])((function(){return c.TextToBase64&&c.TextToBase64.apply(c,arguments)}),["prevent"])),id:"tobase64"},Oe),me,Object(a["f"])("a",{class:"btn btn-primary",onClick:t[9]||(t[9]=Object(a["H"])((function(){return c.Base64ToText&&c.Base64ToText.apply(c,arguments)}),["prevent"])),id:"frombase64"},ve)]),je,he,Object(a["f"])("div",Ce,[Object(a["f"])("div",Ee,[Object(a["f"])("div",Ae,[Object(a["G"])(Object(a["f"])("input",{onChange:t[10]||(t[10]=function(){return c.updateUserCertificates&&c.updateUserCertificates.apply(c,arguments)}),type:"checkbox",id:"usepersonal",class:"form-check-input","onUpdate:modelValue":t[11]||(t[11]=function(e){return c.usepersonal=e})},null,544),[[a["B"],c.usepersonal]]),ye])])]),c.usepersonal?(Object(a["s"])(),Object(a["e"])("div",xe,[Se,Object(a["f"])("div",Te,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"personal",name:"personal","onUpdate:modelValue":t[12]||(t[12]=function(e){return c.personal=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(c.personalCertificates.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.id,key:e.id},Object(a["z"])(e.value),9,Ie)})),128))],512),[[a["C"],c.personal]])])])):Object(a["d"])("",!0),Re,Me,Object(a["f"])("div",ke,[Object(a["f"])("a",{onClick:t[13]||(t[13]=Object(a["H"])((function(){return c.SubmitForm&&c.SubmitForm.apply(c,arguments)}),["prevent"])),class:"btn btn-primary me-1 mb-1"},"Создать xml"),Object(a["h"])(s)]),we,De,Object(a["f"])("div",Pe,[Object(a["G"])(Object(a["f"])("textarea",{id:"result",class:"form-control",name:"result","onUpdate:modelValue":t[14]||(t[14]=function(e){return c.result=e}),spellcheck:"false",style:{height:"250px"}},null,512),[[a["D"],c.result]]),Ne])])])])])])])}var Le=n("b85c"),He=(n("b64b"),n("d4ec")),Ge=n("bee2"),Fe=(n("caad"),n("2532"),function(){function e(){Object(He["a"])(this,e),this.crypto=window.cadesplugin}return Object(Ge["a"])(e,[{key:"getUserCertificates",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n,a,c,r,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.crypto.CreateObjectAsync("CAdESCOM.Store");case 2:return n=e.sent,n.Open(this.crypto.CAPICOM_CURRENT_USER_STORE,this.crypto.CAPICOM_MY_STORE,this.crypto.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED),e.next=6,n.Certificates;case 6:return a=e.sent,e.next=9,a.Find(this.crypto.CAPICOM_CERTIFICATE_FIND_TIME_VALID);case 9:a=e.sent,c=[],r=1;case 12:return e.t0=r,e.next=15,a.Count;case 15:if(e.t1=e.sent,!(e.t0<=e.t1)){e.next=32;break}return e.next=19,a.Item(r);case 19:return l=e.sent,e.next=22,this.getCertificateAlgorithm(l);case 22:if(s=e.sent,!s.includes(t)){e.next=29;break}return e.t2=c,e.next=27,this.getCertificateInfo(l,s);case 27:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 29:r+=1,e.next=12;break;case 32:return e.next=34,n.Close();case 34:return e.abrupt("return",c);case 35:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserCertificate",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.crypto.CreateObjectAsync("CAdESCOM.Store");case 2:return n=e.sent,n.Open(this.crypto.CAPICOM_CURRENT_USER_STORE,this.crypto.CAPICOM_MY_STORE,this.crypto.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED),e.next=6,n.Certificates;case 6:return a=e.sent,e.next=9,a.Find(this.crypto.CAPICOM_CERTIFICATE_FIND_SHA1_HASH,t);case 9:return a=e.sent,e.next=12,a.Count;case 12:return c=e.sent,e.next=15,n.Close();case 15:if(0!==c){e.next=17;break}return e.abrupt("return",void 0);case 17:return e.abrupt("return",a.Item(1));case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signSignedInfoDigest",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t,n,a){var c,r,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUserCertificate(t);case 2:return c=e.sent,e.next=5,c.Export(0);case 5:return r=e.sent,e.next=8,this.crypto.CreateObjectAsync("CAdESCOM.HashedData");case 8:if(l=e.sent,!n.includes("256")){e.next=14;break}return e.next=12,l.propset_Algorithm(this.crypto.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256);case 12:e.next=17;break;case 14:if(!n.includes("512")){e.next=17;break}return e.next=17,l.propset_Algorithm(this.crypto.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512);case 17:return e.next=19,l.SetHashValue(a);case 19:return e.next=21,this.crypto.CreateObjectAsync("CAdESCOM.RawSignature");case 21:return s=e.sent,e.prev=22,e.next=25,s.SignHash(l,c);case 25:return e.t0=e.sent,e.t1=r,e.abrupt("return",{hex:e.t0,cert:e.t1});case 30:e.prev=30,e.t2=e["catch"](22),console.log("Failed to create signature. Error: "+this.crypto.getLastError(e.t2));case 33:return e.abrupt("return",void 0);case 34:case"end":return e.stop()}}),e,this,[[22,30]])})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"getCertificateAlgorithm",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.PublicKey();case 2:return n=e.sent,e.next=5,n.Algorithm;case 5:return a=e.sent,e.next=8,a.FriendlyName;case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCertificateInfo",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.SubjectName;case 2:return e.t0=e.sent,e.next=5,t.Thumbprint;case 5:return e.t1=e.sent,e.next=8,t.ValidToDate;case 8:return e.t2=e.sent,e.t3=n,e.abrupt("return",{subject:e.t0,thumbprint:e.t1,validTo:e.t2,algorithm:e.t3});case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}()),Be=n("3835"),Ve=(n("4fad"),n("d3b7"),n("ac1f"),n("466d"),n("4d63"),n("25f0"),n("bc3a")),Ye=n.n(Ve),qe=function(){function e(t){Object(He["a"])(this,e),this.axios=Ye.a,this.apiurl=t,this.config={headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}}}return Object(Ge["a"])(e,[{key:"load",value:function(e,t){var n=this;console.log("ApiHandler: load"),console.log(t);for(var a=new FormData,c=0,r=Object.entries(t);c<r.length;c++){var l=Object(Be["a"])(r[c],2),s=l[0],i=l[1];a.append(s,i)}return new Promise((function(t,c){n.axios.post(n.apiurl+e,a).then((function(e){200===e.status&&e.data?t(e.data):c("response.status: "+e.status)})).catch((function(e){c("internal error: "+e)}))}))}},{key:"json",value:function(e,t){var n=this;console.log("ApiHandler: json"),console.log(t);var a=JSON.stringify(t);return new Promise((function(t,c){n.axios.post(n.apiurl+e,a).then((function(e){200===e.status&&e.data?t(e.data):c("response.status: "+e.status)})).catch((function(e){c("internal error: "+e)}))}))}},{key:"get",value:function(e){var t=this;return new Promise((function(n,a){t.axios.get(t.apiurl+e).then((function(e){200===e.status&&e.data?n(e.data):a("response.status: "+e.status)})).catch((function(e){a("internal error: "+e)}))}))}},{key:"getCookieByName",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:""}}]),e}(),Xe=(n("1276"),n("5319"),n("841c"),n("fb6a"),function(){function e(){Object(He["a"])(this,e)}return Object(Ge["a"])(e,[{key:"createShiftArr",value:function(){for(var e=["\n"],t=0;t<100;t++)e.push(e[t]+"    ");return e}},{key:"prettyXml",value:function(e){var t=this.createShiftArr(),n=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),a=n.length,c=!1,r=0,l="",s=0;for(s=0;s<a;s++)n[s].search(/<!/)>-1?(l+=t[r]+n[s],c=!0,(n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1||n[s].search(/!DOCTYPE/)>-1)&&(c=!1)):n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1?(l+=n[s],c=!1):/^<\w/.exec(n[s-1])&&/^<\/\w/.exec(n[s])&&/^<[\w:\-\.\,]+/.exec(n[s-1])==/^<\/[\w:\-\.\,]+/.exec(n[s])[0].replace("/","")?(l+=n[s],c||r--):n[s].search(/<\w/)>-1&&-1==n[s].search(/<\//)&&-1==n[s].search(/\/>/)?l=l+=c?n[s]:t[r++]+n[s]:n[s].search(/<\w/)>-1&&n[s].search(/<\//)>-1?l=l+=c?n[s]:t[r]+n[s]:n[s].search(/<\//)>-1?l=l+=c?n[s]:t[--r]+n[s]:n[s].search(/\/>/)>-1?l=l+=c?n[s]:t[r]+n[s]:n[s].search(/<\?/)>-1||n[s].search(/xmlns\:/)>-1||n[s].search(/xmlns\=/)>-1?l+=t[r]+n[s]:l+=n[s];return"\n"==l[0]?l.slice(1):l}},{key:"xmlMin",value:function(e){var t=e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"");return t=t.replace(/[ \r\n\t]{1,}xmlns/g," xmlns"),t=t.replace(/[ \r\n\t]+\</g,"<"),t.replace(/>\s{0,}</g,"><")}},{key:"base64Encode",value:function(e){var t,n,a,c,r,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="",i="",o="",u=0;do{t=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u++),a=t>>2,c=(3&t)<<4|n>>4,r=(15&n)<<2|i>>6,o=63&i,isNaN(n)?r=o=64:isNaN(i)&&(o=64),s=s+l.charAt(a)+l.charAt(c)+l.charAt(r)+l.charAt(o),t=n=i="",a=c=r=o=""}while(u<e.length);return s}},{key:"base64Decode",value:function(e){var t,n,a,c,r,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="",i="",o="",u=0,d=/[^A-Za-z0-9\+\/\=]/g;if(d.exec(e))return null;do{a=l.indexOf(e.charAt(u++)),c=l.indexOf(e.charAt(u++)),r=l.indexOf(e.charAt(u++)),o=l.indexOf(e.charAt(u++)),t=a<<2|c>>4,n=(15&c)<<4|r>>2,i=(3&r)<<6|o,s+=String.fromCharCode(t),64!=r&&(s+=String.fromCharCode(n)),64!=o&&(s+=String.fromCharCode(i)),t=n=i="",a=c=r=o=""}while(u<e.length);return s}},{key:"reverse",value:function(e){var t,n="";for(t=e.length-1;t>=0;t--)n+=e.charAt(t);return n}},{key:"d2h",value:function(e){var t=e.toString(16).toUpperCase();return 1==t.length&&(t="0"+t),t}},{key:"stringToHex",value:function(e){for(var t="",n=0;n<e.length;n++)t+=this.d2h(e.charCodeAt(n));return t}},{key:"hexToString",value:function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}}]),e}()),ze=n("11c1"),Je=n("e762"),Ke=Object(a["f"])("button",{type:"button",class:"btn btn-primary me-1 mb-1","data-bs-toggle":"modal","data-bs-target":"#resultModal"}," Показать json запроса ",-1),We=Object(a["f"])("div",{class:"modal fade",id:"resultModal",tabindex:"-1",role:"dialog","aria-labelledby":"resultModalTitle","aria-hidden":"true"},[Object(a["f"])("div",{class:"modal-dialog modal-dialog-centered modal-dialog-centered modal-dialog-scrollable",role:"document"},[Object(a["f"])("div",{class:"modal-content"},[Object(a["f"])("div",{class:"modal-header"},[Object(a["f"])("h5",{class:"modal-title",id:"resultModalTitle"},"JSON"),Object(a["f"])("button",{type:"button",class:"close","data-bs-dismiss":"modal","aria-label":"Close"},[Object(a["f"])("i",{"data-feather":"x"})])]),Object(a["f"])("div",{class:"modal-body"},[Object(a["f"])("pre",{id:"json"})]),Object(a["f"])("div",{class:"modal-footer"},[Object(a["f"])("button",{type:"button",class:"btn btn-info","data-bs-dismiss":"modal"},[Object(a["f"])("span",{class:"d-none d-sm-block"},"Закрыть")])])])])],-1);function Ze(e,t){return Object(a["s"])(),Object(a["e"])(a["a"],null,[Ke,We],64)}const Qe={},$e=I()(Qe,[["render",Ze]]);var et=$e;n("1589");var tt={setup:function(){var e=Object(x["b"])(),t=Object(a["v"])(),n=Object(a["v"])(),c=Object(a["u"])({value:[]}),r=Object(a["v"])(),l=Object(a["v"])(),s=Object(a["u"])({value:[]}),i=Object(a["v"])(),o=Object(a["u"])({value:[{key:"1",value:"1.1"},{key:"2",value:"1.2"},{key:"3",value:"1.3"}]}),u=Object(a["v"])(),d=Object(a["v"])(),p=Object(a["v"])(),b=new qe(e.getters.getBackendUrl),f=new Xe,O=new Fe,m={"ГОСТ Р 34.10-2012 256 бит":"GOST3410_2012_256","ГОСТ Р 34.10-2012 512 бит":"GOST3410_2012_512"};function g(){return _.apply(this,arguments)}function _(){return _=Object(y["a"])(regeneratorRuntime.mark((function e(){var a,s,o,m,g,_,j,h,C,E,A;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.value){e.next=3;break}return p.value="Бизнес данные пусты!",e.abrupt("return");case 3:if(d.value){e.next=6;break}return p.value="MessageId не указан!",e.abrupt("return");case 6:if(a={request_type:"sign_xml",data:t.value,sign_alias:i.value,options:{data_type:n.value,sign_type:"create",uuid:d.value,xml_scheme:u.value}},!l.value){e.next=25;break}return e.next=10,v();case 10:if(s=e.sent,0!=Object.keys(s).length){e.next=14;break}return p.value="digest для подписи не получен",e.abrupt("return");case 14:return o=c.value[r.value].thumbprint,m=c.value[r.value].algorithm,g=f.base64Decode(s[m].signedInfoDigest),_=f.stringToHex(g),e.next=20,O.signSignedInfoDigest(o,m,_);case 20:j=e.sent,h=f.hexToString(j.hex),C=f.reverse(h),E=f.base64Encode(C),a["personal_sign"]={digest_value:s[m].digest,certificate:j.cert,algorithm:m,signature_value:E};case 25:return document.getElementById("json").innerHTML=JSON.stringify(a,void 0,4),e.next=28,b.json("/sign",a);case 28:A=e.sent,A.error?p.value=A.error_description:p.value=Je["a"].decode(A.full_xml);case 30:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function v(){return j.apply(this,arguments)}function j(){return j=Object(y["a"])(regeneratorRuntime.mark((function e(){var n,a,c,r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},e.next=3,b.json("/sign",{request_type:"sign_xml",data:t.value,options:{sign_type:"digest"}});case 3:if(a=e.sent,a.error)p.value=a.error_description;else{c=Object(Le["a"])(a.digest);try{for(c.s();!(r=c.n()).done;)l=r.value,n[l.algorithm]={digest:l.value,signedInfoDigest:l.signed_info}}catch(s){c.e(s)}finally{c.f()}}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function h(){d.value=Object(ze["v1"])()}function C(){t.value&&(t.value=f.prettyXml(t.value))}function E(){t.value&&(t.value=f.xmlMin(t.value))}function A(){t.value&&(t.value=Je["a"].encode(t.value))}function S(){t.value&&(t.value=Je["a"].decode(t.value))}function T(){return I.apply(this,arguments)}function I(){return I=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!l.value){e.next=9;break}return c.value=[],e.next=4,O.getUserCertificates("34.10-2012");case 4:t=e.sent,n=0,a=Object(Le["a"])(t);try{for(a.s();!(s=a.n()).done;)i=s.value,c.value.push({id:n,thumbprint:i.thumbprint,value:i.subject+" / "+i.validTo,algorithm:m[i.algorithm]}),n++}catch(o){a.e(o)}finally{a.f()}c.value.length>0&&(r.value=c.value[0].id);case 9:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}return Object(a["q"])(Object(y["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("onMounted CreateXml"),e.dispatch("updatePageHeader","Создание xml"),t.next=4,b.get("containers");case 4:a=t.sent,s.value=a,s.value.length>0&&(i.value=s.value[0].value),u.value=o.value[0].value,n.value="SendRequestRequest";case 9:case"end":return t.stop()}}),t)})))),{bdata:t,xmltype:n,smevscheme:o,scheme:u,uuid:d,result:p,container:i,containers:s,usepersonal:l,personal:r,personalCertificates:c,TextFormat:C,TextMinimize:E,TextToBase64:A,Base64ToText:S,SubmitForm:g,GenerateUuid:h,updateUserCertificates:T}},components:{JsonButton:et}};const nt=I()(tt,[["render",Ue]]);var at=nt,ct={class:"card"},rt=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"Подписание сформированного xml")],-1),lt={class:"card-content"},st={class:"card-body"},it={class:"form form-horizontal"},ot={class:"form-body"},ut={class:"row"},dt=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Подпись")],-1),pt={class:"col-md-9 form-group"},bt=["value"],ft=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Тип xml")],-1),Ot={class:"col-md-9 form-group"},mt=Object(a["f"])("option",{value:"SendRequestRequest"},"SendRequestRequest",-1),gt=Object(a["f"])("option",{value:"SendResponseRequest"},"SendResponseRequest",-1),_t=[mt,gt],vt=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,[Object(a["g"])("Xml, в base64"),Object(a["f"])("br"),Object(a["g"])("[ содержимое soap > body ]")])],-1),jt={class:"col-md-9 form-group"},ht=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),Ct={class:"col-md-9 form-group"},Et=Object(a["f"])("i",{class:"fa fa-lg fa-indent"},null,-1),At=Object(a["g"])(" Форматировать"),yt=[Et,At],xt=Object(a["g"])("  "),St=Object(a["f"])("i",{class:"fa fa-lg fa-dedent"},null,-1),Tt=Object(a["g"])(" Минимизировать"),It=[St,Tt],Rt=Object(a["g"])("     "),Mt=Object(a["f"])("i",{class:"fa fa-lg fa-file-archive-o"},null,-1),kt=Object(a["g"])(" Текст в base64"),wt=[Mt,kt],Dt=Object(a["g"])("  "),Pt=Object(a["f"])("i",{class:"fa fa-lg fa-file-text-o"},null,-1),Nt=Object(a["g"])(" base64 в текст"),Ut=[Pt,Nt],Lt=Object(a["f"])("hr",null,null,-1),Ht=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),Gt={class:"col-md-9 form-group"},Ft=Object(a["f"])("hr",null,null,-1),Bt=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Результат")],-1),Vt={class:"col-md-9 form-group"},Yt=Object(a["f"])("p",{style:{"padding-top":"20px"}},[Object(a["f"])("a",{target:"_blank",href:"http://qs.cryptopro.ru/SVS/Verify/"},"Проверка подписанной xml")],-1);function qt(e,t,n,c,r,l){var s=Object(a["x"])("JsonButton");return Object(a["s"])(),Object(a["e"])("div",ct,[rt,Object(a["f"])("div",lt,[Object(a["f"])("div",st,[Object(a["f"])("form",it,[Object(a["f"])("div",ot,[Object(a["f"])("div",ut,[dt,Object(a["f"])("div",pt,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"container",name:"container","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.container=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(c.containers.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,bt)})),128))],512),[[a["C"],c.container]])]),ft,Object(a["f"])("div",Ot,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"xmltype",name:"xmltype","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.xmltype=e})},_t,512),[[a["C"],c.xmltype]])]),vt,Object(a["f"])("div",jt,[Object(a["G"])(Object(a["f"])("textarea",{id:"bdata",class:"form-control",name:"bdata","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.bdata=e}),spellcheck:"false",style:{height:"250px"}},null,512),[[a["D"],c.bdata]])]),ht,Object(a["f"])("div",Ct,[Object(a["f"])("a",{class:"btn btn-primary",onClick:t[3]||(t[3]=Object(a["H"])((function(){return c.TextFormat&&c.TextFormat.apply(c,arguments)}),["prevent"])),id:"xml"},yt),xt,Object(a["f"])("a",{class:"btn btn-primary",onClick:t[4]||(t[4]=Object(a["H"])((function(){return c.TextMinimize&&c.TextMinimize.apply(c,arguments)}),["prevent"])),id:"xmlmin"},It),Rt,Object(a["f"])("a",{class:"btn btn-primary",onClick:t[5]||(t[5]=Object(a["H"])((function(){return c.TextToBase64&&c.TextToBase64.apply(c,arguments)}),["prevent"])),id:"tobase64"},wt),Dt,Object(a["f"])("a",{class:"btn btn-primary",onClick:t[6]||(t[6]=Object(a["H"])((function(){return c.Base64ToText&&c.Base64ToText.apply(c,arguments)}),["prevent"])),id:"frombase64"},Ut)]),Lt,Ht,Object(a["f"])("div",Gt,[Object(a["f"])("a",{onClick:t[7]||(t[7]=Object(a["H"])((function(){return c.SubmitForm&&c.SubmitForm.apply(c,arguments)}),["prevent"])),class:"btn btn-primary me-1 mb-1"},"Подписать xml"),Object(a["h"])(s)]),Ft,Bt,Object(a["f"])("div",Vt,[Object(a["G"])(Object(a["f"])("textarea",{id:"result",class:"form-control",name:"result","onUpdate:modelValue":t[8]||(t[8]=function(e){return c.result=e}),spellcheck:"false",style:{height:"250px"}},null,512),[[a["D"],c.result]]),Yt])])])])])])])}var Xt={setup:function(){var e=Object(x["b"])(),t=Object(a["v"])(),n=Object(a["v"])(),c=Object(a["u"])({value:[]}),r=Object(a["v"])(),l=Object(a["v"])(),s=new qe(e.getters.getBackendUrl),i=new Xe;function o(){return u.apply(this,arguments)}function u(){return u=Object(y["a"])(regeneratorRuntime.mark((function e(){var a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.value){e.next=3;break}return l.value="Xml не указана!",e.abrupt("return");case 3:return a={request_type:"sign_xml",data:t.value,sign_alias:r.value,options:{data_type:n.value,sign_type:"sign"}},document.getElementById("json").innerHTML=JSON.stringify(a,void 0,4),e.next=7,s.json("/sign",a);case 7:c=e.sent,c.error?l.value=c.error_description:l.value=Je["a"].decode(c.full_xml);case 9:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function d(){t.value&&(t.value=i.prettyXml(t.value))}function p(){t.value&&(t.value=i.xmlMin(t.value))}function b(){t.value&&(t.value=Je["a"].encode(t.value))}function f(){t.value&&(t.value=Je["a"].decode(t.value))}return Object(a["q"])(Object(y["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("onMounted SignXml"),e.dispatch("updatePageHeader","Подписание xml"),t.next=4,s.get("containers");case 4:a=t.sent,c.value=a,c.value.length>0&&(r.value=c.value[0].value),n.value="SendRequestRequest";case 8:case"end":return t.stop()}}),t)})))),{bdata:t,xmltype:n,result:l,container:r,containers:c,TextFormat:d,TextMinimize:p,TextToBase64:b,Base64ToText:f,SubmitForm:o}},components:{JsonButton:et}};const zt=I()(Xt,[["render",qt]]);var Jt=zt,Kt={class:"card"},Wt=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"Xml опроса очереди и подтверждение получения")],-1),Zt={class:"card-content"},Qt={class:"card-body"},$t={class:"form form-horizontal"},en={class:"form-body"},tn={class:"row"},nn=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Подпись")],-1),an={class:"col-md-9 form-group"},cn=["value"],rn=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Схема СМЭВ3")],-1),ln={class:"col-md-9 form-group"},sn=["value"],on=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Xml")],-1),un={class:"col-md-9 form-group"},dn=["value"],pn={key:0,class:"formRow"},bn={class:"col-md-3"},fn=Object(a["f"])("label",null,"MessageId, uuid.v1",-1),On={style:{float:"right","padding-right":"20px"}},mn=Object(a["f"])("i",{class:"fa fa-lg fa-gear"},null,-1),gn=[mn],_n={class:"col-md-9 form-group",style:{"padding-left":"5px"}},vn={key:1,class:"formRow"},jn=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Опрос очереди по ВС: RootElement")],-1),hn={class:"col-md-9 form-group",style:{"padding-left":"5px"}},Cn=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Опрос очереди по ВС: Namespace")],-1),En={class:"col-md-9 form-group",style:{"padding-left":"5px"}},An=Object(a["f"])("hr",null,null,-1),yn=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),xn={class:"col-md-9 form-group"},Sn=Object(a["f"])("hr",null,null,-1),Tn=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Результат")],-1),In={class:"col-md-9 form-group"},Rn=Object(a["f"])("p",{style:{"padding-top":"20px"}},[Object(a["f"])("a",{target:"_blank",href:"http://qs.cryptopro.ru/SVS/Verify/"},"Проверка подписанной xml")],-1);function Mn(e,t,n,c,r,l){var s=Object(a["x"])("JsonButton");return Object(a["s"])(),Object(a["e"])("div",Kt,[Wt,Object(a["f"])("div",Zt,[Object(a["f"])("div",Qt,[Object(a["f"])("form",$t,[Object(a["f"])("div",en,[Object(a["f"])("div",tn,[nn,Object(a["f"])("div",an,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"container",name:"container","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.container=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(c.containers.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,cn)})),128))],512),[[a["C"],c.container]])]),rn,Object(a["f"])("div",ln,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"scheme",name:"scheme","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.scheme=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(c.smevscheme.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,sn)})),128))],512),[[a["C"],c.scheme]])]),on,Object(a["f"])("div",un,[Object(a["G"])(Object(a["f"])("select",{onChange:t[2]||(t[2]=function(){return c.xmlChange&&c.xmlChange.apply(c,arguments)}),class:"form-select",id:"xml",name:"xml","onUpdate:modelValue":t[3]||(t[3]=function(e){return c.xml=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(c.xmltype.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,dn)})),128))],544),[[a["C"],c.xml]])]),c.isAck?(Object(a["s"])(),Object(a["e"])("div",pn,[Object(a["f"])("div",bn,[fn,Object(a["f"])("div",On,[Object(a["f"])("a",{onClick:t[4]||(t[4]=Object(a["H"])((function(){return c.GenerateUuid&&c.GenerateUuid.apply(c,arguments)}),["prevent"])),class:"btn btn-info btn-sm me-1 mb-1"},gn)])]),Object(a["f"])("div",_n,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"uuid",name:"uuid","onUpdate:modelValue":t[5]||(t[5]=function(e){return c.uuid=e})},null,512),[[a["D"],c.uuid]])])])):(Object(a["s"])(),Object(a["e"])("div",vn,[jn,Object(a["f"])("div",hn,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"rootelement",name:"rootelement","onUpdate:modelValue":t[6]||(t[6]=function(e){return c.rootelement=e})},null,512),[[a["D"],c.rootelement]])]),Cn,Object(a["f"])("div",En,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"namespace",name:"namespace","onUpdate:modelValue":t[7]||(t[7]=function(e){return c.namespace=e})},null,512),[[a["D"],c.namespace]])])])),An,yn,Object(a["f"])("div",xn,[Object(a["f"])("a",{onClick:t[8]||(t[8]=Object(a["H"])((function(){return c.SubmitForm&&c.SubmitForm.apply(c,arguments)}),["prevent"])),class:"btn btn-primary me-1 mb-1"},"Создать xml"),Object(a["h"])(s)]),Sn,Tn,Object(a["f"])("div",In,[Object(a["G"])(Object(a["f"])("textarea",{id:"result",class:"form-control",name:"result","onUpdate:modelValue":t[9]||(t[9]=function(e){return c.result=e}),spellcheck:"false",style:{height:"250px"}},null,512),[[a["D"],c.result]]),Rn])])])])])])])}var kn={setup:function(){var e=Object(x["b"])(),t=Object(a["u"])({value:[]}),n=Object(a["v"])(),c=Object(a["u"])({value:[{key:"1",value:"1.1"},{key:"2",value:"1.2"},{key:"3",value:"1.3"}]}),r=Object(a["v"])(),l=Object(a["u"])({value:[{key:"1",value:"GetRequestRequest"},{key:"2",value:"GetResponseRequest"},{key:"3",value:"AckRequest"}]}),s=Object(a["v"])(),i=Object(a["v"])(),o=Object(a["v"])(),u=Object(a["v"])(),d=Object(a["v"])(!1),p=Object(a["v"])(),b=new qe(e.getters.getBackendUrl);function f(){return O.apply(this,arguments)}function O(){return O=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="queue_xml","AckRequest"!=s.value){e.next=6;break}if(t="ack_xml",i.value){e.next=6;break}return p.value="MessageId не указан!",e.abrupt("return");case 6:return a={request_type:t,sign_alias:n.value,options:{data_type:s.value,uuid:i.value,xml_scheme:r.value}},o.value&&u.value&&(a.options.root_element=o.value,a.options.namespace=u.value),document.getElementById("json").innerHTML=JSON.stringify(a,void 0,4),e.next=11,b.json("/sign",a);case 11:c=e.sent,c.error?p.value=c.error_description:p.value=Je["a"].decode(c.full_xml);case 13:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function m(){i.value=Object(ze["v1"])()}function g(){d.value="AckRequest"==s.value}return Object(a["q"])(Object(y["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("onMounted QueueXml"),e.dispatch("updatePageHeader","Опрос очереди СМЭВ"),a.next=4,b.get("containers");case 4:i=a.sent,t.value=i,t.value.length>0&&(n.value=t.value[0].value),r.value=c.value[0].value,s.value=l.value[0].value;case 9:case"end":return a.stop()}}),a)})))),{containers:t,container:n,smevscheme:c,scheme:r,uuid:i,result:p,xmltype:l,xml:s,rootelement:o,namespace:u,SubmitForm:f,GenerateUuid:m,isAck:d,xmlChange:g}},components:{JsonButton:et}};const wn=I()(kn,[["render",Mn]]);var Dn=wn,Pn={class:"card"},Nn=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"Подпись файлов")],-1),Un={class:"card-content"},Ln={class:"card-body"},Hn={class:"form form-horizontal"},Gn={class:"form-body"},Fn={class:"row"},Bn=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Подпись")],-1),Vn={class:"col-md-9 form-group"},Yn=["value"],qn=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),Xn={class:"col-md-9 form-group"},zn={class:"form-check"},Jn={class:"checkbox"},Kn={key:0,for:"detached"},Wn={key:1,for:"detached"},Zn=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),Qn={class:"col-md-9 form-group"},$n={class:"form-check"},ea={class:"checkbox"},ta=Object(a["f"])("label",{for:"archive"},"Архивировать файлы, после подписания, в zip",-1),na={key:0,class:"col-md-3"},aa=Object(a["f"])("label",null,"Имя архива",-1),ca=[aa],ra={key:1,class:"col-md-9 form-group"},la=Object(a["f"])("hr",null,null,-1),sa=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,[Object(a["g"])("Директория с файлами,"),Object(a["f"])("br"),Object(a["g"])("на сервере рядом с smevsign")])],-1),ia={class:"col-md-9 form-group"},oa={style:{"padding-top":"7px"}},ua=Object(a["f"])("i",{class:"fa fa-save"},null,-1),da=[ua],pa=Object(a["g"])("   "),ba=Object(a["f"])("i",{class:"fa fa-trash"},null,-1),fa=[ba],Oa=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,[Object(a["g"])("Имена файлов в указанной директории,"),Object(a["f"])("br"),Object(a["g"])("по одному имени файла в строке")])],-1),ma={class:"col-md-9 form-group"},ga=Object(a["f"])("hr",null,null,-1),_a=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),va={class:"col-md-9 form-group"},ja=Object(a["f"])("hr",null,null,-1),ha=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),Ca={class:"col-md-9 form-group"},Ea=Object(a["f"])("p",{style:{"padding-top":"20px"}},"Подпись формируется рядом с исходными файлами",-1),Aa=Object(a["f"])("p",{style:{"padding-top":"5px"}},[Object(a["f"])("a",{target:"_blank",href:"https://crypto.kontur.ru/verify#"},"Проверка подписанных файлов")],-1);function ya(e,t,n,c,r,l){var s=Object(a["x"])("JsonButton");return Object(a["s"])(),Object(a["e"])("div",Pn,[Nn,Object(a["f"])("div",Un,[Object(a["f"])("div",Ln,[Object(a["f"])("form",Hn,[Object(a["f"])("div",Gn,[Object(a["f"])("div",Fn,[Bn,Object(a["f"])("div",Vn,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"container",name:"container","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.container=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(c.containers.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,Yn)})),128))],512),[[a["C"],c.container]])]),qn,Object(a["f"])("div",Xn,[Object(a["f"])("div",zn,[Object(a["f"])("div",Jn,[Object(a["G"])(Object(a["f"])("input",{type:"checkbox",id:"detached",class:"form-check-input","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.detached=e})},null,512),[[a["B"],c.detached]]),c.detached?(Object(a["s"])(),Object(a["e"])("label",Kn,"Открепленная подпись")):(Object(a["s"])(),Object(a["e"])("label",Wn,"Прикрепленная подпись"))])])]),Zn,Object(a["f"])("div",Qn,[Object(a["f"])("div",$n,[Object(a["f"])("div",ea,[Object(a["G"])(Object(a["f"])("input",{type:"checkbox",id:"archive",class:"form-check-input","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.archive=e})},null,512),[[a["B"],c.archive]]),ta])])]),c.archive?(Object(a["s"])(),Object(a["e"])("div",na,ca)):Object(a["d"])("",!0),c.archive?(Object(a["s"])(),Object(a["e"])("div",ra,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"archname",name:"archname","onUpdate:modelValue":t[3]||(t[3]=function(e){return c.archname=e})},null,512),[[a["D"],c.archname]])])):Object(a["d"])("",!0),la,sa,Object(a["f"])("div",ia,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"storage",name:"storage","onUpdate:modelValue":t[4]||(t[4]=function(e){return c.storage=e})},null,512),[[a["D"],c.storage]]),Object(a["f"])("div",oa,[Object(a["f"])("a",{href:"#",title:"Сохранить путь",class:"btn btn-primary btn-sm",onClick:t[5]||(t[5]=Object(a["H"])((function(){return c.saveStoragePath&&c.saveStoragePath.apply(c,arguments)}),["prevent"]))},da),pa,Object(a["f"])("a",{href:"#",title:"Удалить путь",class:"btn btn-danger btn-sm",onClick:t[6]||(t[6]=Object(a["H"])((function(){return c.deleteStoragePath&&c.deleteStoragePath.apply(c,arguments)}),["prevent"]))},fa)])]),Oa,Object(a["f"])("div",ma,[Object(a["G"])(Object(a["f"])("textarea",{id:"files",class:"form-control",name:"files","onUpdate:modelValue":t[7]||(t[7]=function(e){return c.files=e}),spellcheck:"false",style:{height:"250px"}},null,512),[[a["D"],c.files]])]),ga,_a,Object(a["f"])("div",va,[Object(a["f"])("a",{onClick:t[8]||(t[8]=Object(a["H"])((function(){return c.SubmitForm&&c.SubmitForm.apply(c,arguments)}),["prevent"])),class:"btn btn-primary me-1 mb-1"},"Подписать файлы"),Object(a["h"])(s)]),ja,ha,Object(a["f"])("div",Ca,[Object(a["G"])(Object(a["f"])("textarea",{id:"result",class:"form-control",name:"result","onUpdate:modelValue":t[9]||(t[9]=function(e){return c.result=e}),spellcheck:"false",style:{height:"100px"}},null,512),[[a["D"],c.result]]),Ea,Aa])])])])])])])}n("498a");var xa={setup:function(){var e=Object(x["b"])(),t=Object(a["v"])(),n=Object(a["v"])(!0),c=Object(a["v"])(!0),r=Object(a["v"])("SignedContent.zip"),l=Object(a["v"])(),s=Object(a["u"])({value:[]}),i=Object(a["v"])(),o=Object(a["v"])(),u=new qe(e.getters.getBackendUrl);function d(){return p.apply(this,arguments)}function p(){return p=Object(y["a"])(regeneratorRuntime.mark((function e(){var a,s,d,p,b,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.value){e.next=3;break}return o.value="Путь к файлам не указан!",e.abrupt("return");case 3:if(a=[],l.value){s=Object(Le["a"])(l.value.split("\n"));try{for(s.s();!(d=s.n()).done;)p=d.value,a.push({file_path:t.value,file_name:p.trim()})}catch(O){s.e(O)}finally{s.f()}}if(0!=a.length){e.next=8;break}return o.value="Файлы не указаны!",e.abrupt("return");case 8:return b={request_type:"sign_file",sign_alias:i.value,options:{signature_detached:n.value},files:a},c.value&&(b.options["zip_name"]=r.value),document.getElementById("json").innerHTML=JSON.stringify(b,void 0,4),e.next=13,u.json("/sign",b);case 13:f=e.sent,f.error?o.value=f.error_description:o.value=Je["a"].decode(f.value);case 15:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function b(){localStorage.setItem("storagePath",t.value),e.dispatch("updateStoragePath",t.value)}function f(){localStorage.removeItem("storagePath"),e.dispatch("updateStoragePath",""),t.value=""}return Object(a["q"])(Object(y["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("onMounted SignFile"),e.dispatch("updatePageHeader","Подпись файлов"),n.next=4,u.get("containers");case 4:a=n.sent,s.value=a,s.value.length>0&&(i.value=s.value[0].value),console.log(e.getters.getStoragePath),t.value=e.getters.getStoragePath;case 9:case"end":return n.stop()}}),n)})))),{storage:t,detached:n,archive:c,archname:r,files:l,result:o,container:i,containers:s,SubmitForm:d,saveStoragePath:b,deleteStoragePath:f}},components:{JsonButton:et}};const Sa=I()(xa,[["render",ya]]);var Ta=Sa,Ia={class:"card"},Ra=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"Подпись строки")],-1),Ma={class:"card-content"},ka={class:"card-body"},wa={class:"form form-horizontal"},Da={class:"form-body"},Pa={class:"row"},Na=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Подпись")],-1),Ua={class:"col-md-9 form-group"},La=["value"],Ha=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Строка")],-1),Ga={class:"col-md-9 form-group"},Fa=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),Ba={class:"col-md-9 form-group"},Va={class:"form-check"},Ya={class:"checkbox"},qa=Object(a["f"])("label",{for:"urlSafe"},"base64 url safe",-1),Xa=Object(a["f"])("hr",null,null,-1),za=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),Ja={class:"col-md-9 form-group"},Ka=Object(a["f"])("hr",null,null,-1),Wa=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),Za={class:"col-md-9 form-group"};function Qa(e,t,n,c,r,l){var s=Object(a["x"])("JsonButton");return Object(a["s"])(),Object(a["e"])("div",Ia,[Ra,Object(a["f"])("div",Ma,[Object(a["f"])("div",ka,[Object(a["f"])("form",wa,[Object(a["f"])("div",Da,[Object(a["f"])("div",Pa,[Na,Object(a["f"])("div",Ua,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"container",name:"container","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.container=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(c.containers.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,La)})),128))],512),[[a["C"],c.container]])]),Ha,Object(a["f"])("div",Ga,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"string",name:"string","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.string=e})},null,512),[[a["D"],c.string]])]),Fa,Object(a["f"])("div",Ba,[Object(a["f"])("div",Va,[Object(a["f"])("div",Ya,[Object(a["G"])(Object(a["f"])("input",{type:"checkbox",id:"urlSafe",class:"form-check-input","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.urlSafe=e})},null,512),[[a["B"],c.urlSafe]]),qa])])]),Xa,za,Object(a["f"])("div",Ja,[Object(a["f"])("a",{onClick:t[3]||(t[3]=Object(a["H"])((function(){return c.SubmitForm&&c.SubmitForm.apply(c,arguments)}),["prevent"])),class:"btn btn-primary me-1 mb-1"},"Подписать строку"),Object(a["h"])(s)]),Ka,Wa,Object(a["f"])("div",Za,[Object(a["G"])(Object(a["f"])("textarea",{id:"result",class:"form-control",name:"result","onUpdate:modelValue":t[4]||(t[4]=function(e){return c.result=e}),spellcheck:"false",style:{height:"100px"}},null,512),[[a["D"],c.result]])])])])])])])])}var $a={setup:function(){var e=Object(x["b"])(),t=Object(a["v"])(),n=Object(a["u"])({value:[]}),c=Object(a["v"])(),r=Object(a["v"])(),l=Object(a["v"])(!1),s=new qe(e.getters.getBackendUrl);function i(){return o.apply(this,arguments)}function o(){return o=Object(y["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.value){e.next=3;break}return r.value="Строка для подписи не указана!",e.abrupt("return");case 3:return n={request_type:"sign_string",sign_alias:c.value,data:Je["a"].encode(t.value)},l.value&&(n["options"]={url_safe:!0}),document.getElementById("json").innerHTML=JSON.stringify(n,void 0,4),e.next=8,s.json("/sign",n);case 8:a=e.sent,a.error?r.value=a.error_description:r.value=a.value;case 10:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}return Object(a["q"])(Object(y["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("onMounted SignFile"),e.dispatch("updatePageHeader","Подпись строки"),t.next=4,s.get("containers");case 4:a=t.sent,n.value=a,n.value.length>0&&(c.value=n.value[0].value);case 7:case"end":return t.stop()}}),t)})))),{string:t,result:r,container:c,containers:n,urlSafe:l,SubmitForm:i}},components:{JsonButton:et}};const ec=I()($a,[["render",Qa]]);var tc=ec,nc=Object(c["a"])({history:Object(c["b"])(),routes:[{name:"home",path:"/",component:M},{name:"create",path:"/create/",component:at},{name:"sign",path:"/sign/",component:Jt},{name:"queue",path:"/queue/",component:Dn},{name:"files",path:"/files/",component:Ta},{name:"string",path:"/string/",component:tc}],linkActiveClass:"active",linkExactActiveClass:"active"}),ac=Object(x["a"])({state:function(){return{backendUrl:"http://127.0.0.1:8080/api/",pageHeader:"",storagePath:"",updated:!1}},mutations:{setSystemInfo:function(e,t){e.backendUrl=t.backendUrl,e.storagePath=t.storagePath,e.updated=!0},setPageHeader:function(e,t){e.pageHeader=t},setBackendUrl:function(e,t){e.backendUrl=t},setStoragePath:function(e,t){e.storagePath=t}},actions:{updateSystemInfo:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,console.log("store/index updateSystemInfo"),a={backendUrl:"http://127.0.0.1:8080/api/",storagePath:""},"backendUrl"in localStorage?a.backendUrl=localStorage.getItem("backendUrl"):console.log("backendUrl not in localStorage"),"storagePath"in localStorage&&(a.storagePath=localStorage.getItem("storagePath")),n("setSystemInfo",a);case 6:case"end":return t.stop()}}),t)})))()},updatePageHeader:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,a("setPageHeader",t);case 2:case"end":return n.stop()}}),n)})))()},updateBackendUrl:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,a("setBackendUrl",t);case 2:case"end":return n.stop()}}),n)})))()},updateStoragePath:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,a("setStoragePath",t);case 2:case"end":return n.stop()}}),n)})))()}},getters:{getBackendUrl:function(e){return e.backendUrl},getStoragePath:function(e){return e.storagePath},getPageHeader:function(e){return e.pageHeader}}}),cc={id:"main",class:"layout-horizontal"},rc={class:"mb-4"},lc={key:0,class:"content-wrapper container"},sc={class:"page-heading"},ic={class:"page-content"},oc={class:"row"},uc={class:"col-12 col-lg-12"};function dc(e,t,n,c,r,l){var s=Object(a["x"])("HeaderLogo"),i=Object(a["x"])("HeaderMenu"),o=Object(a["x"])("router-view"),u=Object(a["x"])("Footer");return Object(a["s"])(),Object(a["e"])("div",cc,[Object(a["f"])("header",rc,[Object(a["h"])(s),Object(a["h"])(i)]),e.$store.state.updated?(Object(a["s"])(),Object(a["e"])("div",lc,[Object(a["f"])("div",sc,[Object(a["f"])("h3",null,Object(a["z"])(e.$store.getters.getPageHeader),1)]),Object(a["f"])("div",ic,[Object(a["f"])("section",oc,[Object(a["f"])("div",uc,[Object(a["h"])(o)])])])])):Object(a["d"])("",!0),Object(a["h"])(u)])}var pc=Object(a["f"])("div",{class:"container"},[Object(a["f"])("div",{class:"footer clearfix mb-0 text-muted"},[Object(a["f"])("div",{class:"float-start"},[Object(a["f"])("p",null,"2021 © footer start")]),Object(a["f"])("div",{class:"float-end"},[Object(a["f"])("p",null,"footer end")])])],-1),bc=[pc];function fc(e,t){return Object(a["s"])(),Object(a["e"])("footer",null,bc)}const Oc={},mc=I()(Oc,[["render",fc]]);var gc=mc,_c={class:"header-top"},vc={class:"container"},jc={class:"logo"},hc=Object(a["g"])("smevsign-web");function Cc(e,t){var n=Object(a["x"])("router-link");return Object(a["s"])(),Object(a["e"])("div",_c,[Object(a["f"])("div",vc,[Object(a["f"])("div",jc,[Object(a["h"])(n,{to:"/"},{default:Object(a["F"])((function(){return[hc]})),_:1})])])])}const Ec={},Ac=I()(Ec,[["render",Cc]]);var yc=Ac,xc={class:"main-navbar"},Sc={class:"container"},Tc={class:"menu-item"},Ic=Object(a["f"])("i",{class:"fa fa-home"},null,-1),Rc=Object(a["f"])("span",null,"Home",-1),Mc={class:"menu-item"},kc=Object(a["f"])("i",{class:"fa fa-pencil"},null,-1),wc=Object(a["f"])("span",null,"CreateXml",-1),Dc={class:"menu-item"},Pc=Object(a["f"])("i",{class:"fa fa-file-text-o"},null,-1),Nc=Object(a["f"])("span",null,"SignXml",-1),Uc={class:"menu-item"},Lc=Object(a["f"])("i",{class:"fa fa-file-text-o"},null,-1),Hc=Object(a["f"])("span",null,"QueueXml",-1),Gc={class:"menu-item"},Fc=Object(a["f"])("i",{class:"fa fa-file"},null,-1),Bc=Object(a["f"])("span",null,"SignFile",-1),Vc={class:"menu-item"},Yc=Object(a["f"])("i",{class:"fa fa-file-text-o"},null,-1),qc=Object(a["f"])("span",null,"SignString",-1);function Xc(e,t){var n=Object(a["x"])("router-link");return Object(a["s"])(),Object(a["e"])("nav",xc,[Object(a["f"])("div",Sc,[Object(a["f"])("ul",null,[Object(a["f"])("li",Tc,[Object(a["h"])(n,{to:"/",class:"menu-link"},{default:Object(a["F"])((function(){return[Ic,Rc]})),_:1})]),Object(a["f"])("li",Mc,[Object(a["h"])(n,{to:"/create",class:"menu-link"},{default:Object(a["F"])((function(){return[kc,wc]})),_:1})]),Object(a["f"])("li",Dc,[Object(a["h"])(n,{to:"/sign",class:"menu-link"},{default:Object(a["F"])((function(){return[Pc,Nc]})),_:1})]),Object(a["f"])("li",Uc,[Object(a["h"])(n,{to:"/queue",class:"menu-link"},{default:Object(a["F"])((function(){return[Lc,Hc]})),_:1})]),Object(a["f"])("li",Gc,[Object(a["h"])(n,{to:"/files",class:"menu-link"},{default:Object(a["F"])((function(){return[Fc,Bc]})),_:1})]),Object(a["f"])("li",Vc,[Object(a["h"])(n,{to:"/string",class:"menu-link"},{default:Object(a["F"])((function(){return[Yc,qc]})),_:1})])])])])}const zc={},Jc=I()(zc,[["render",Xc]]);var Kc=Jc,Wc={setup:function(){var e=Object(x["b"])();Object(a["o"])((function(){console.log("App onBeforeMount"),e.dispatch("updateSystemInfo")}))},components:{Footer:gc,HeaderLogo:yc,HeaderMenu:Kc}};const Zc=I()(Wc,[["render",dc]]);var Qc=Zc,$c=Object(a["c"])(Qc);$c.use(nc),$c.use(ac),$c.mount("#app")}});
//# sourceMappingURL=app.49b0fb2b.js.map