(function(e){function t(t){for(var a,s,l=t[0],i=t[1],u=t[2],d=0,p=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);o&&o(t);while(p.length)p.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==r[i]&&(a=!1)}a&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},c=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var o=i;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1589:function(module,exports,__webpack_require__){var _typeof=__webpack_require__("7037").default;__webpack_require__("d3b7"),__webpack_require__("ac1f"),__webpack_require__("466d"),__webpack_require__("5319"),__webpack_require__("a434"),__webpack_require__("fb6a"),__webpack_require__("b0c0"),__webpack_require__("25f0"),function(){if(!window.cadesplugin){var pluginObject,plugin_resolved=0,plugin_reject,plugin_resolve,isOpera=0,isFireFox=0,isSafari=0,isYandex=0,canPromise=!!window.Promise,cadesplugin_loaded_event_recieved=!1,cadesplugin;cadesplugin=canPromise?new Promise((function(e,t){plugin_resolve=e,plugin_reject=t})):{};var browserSpecs=check_browser(),ru_cryptopro_npcades_10_native_bridge={callbacksCount:1,callbacks:{},resultForCallback:function(e,t){var n=ru_cryptopro_npcades_10_native_bridge.callbacks[e];n&&n.apply(null,t)},call:function(e,t,n){var a=n&&"function"===typeof n,r=a?ru_cryptopro_npcades_10_native_bridge.callbacksCount++:0;a&&(ru_cryptopro_npcades_10_native_bridge.callbacks[r]=n);var c=document.createElement("IFRAME"),s=new Array("_CPNP_handle");try{c.setAttribute("src","cpnp-js-call:"+e+":"+r+":"+encodeURIComponent(JSON.stringify(t,s)))}catch(l){alert(l)}document.documentElement.appendChild(c),c.parentNode.removeChild(c),c=null}};cadesplugin.JSModuleVersion="2.3.1",cadesplugin.async_spawn=async_spawn,cadesplugin.set=set_pluginObject,cadesplugin.set_log_level=set_log_level,cadesplugin.getLastError=getLastError,cadesplugin.is_capilite_enabled=is_capilite_enabled,isNativeMessageSupported()&&(cadesplugin.CreateObjectAsync=CreateObjectAsync,cadesplugin.ReleasePluginObjects=ReleasePluginObjects),isNativeMessageSupported()||(cadesplugin.CreateObject=CreateObject),window.cadesplugin_load_timeout?setTimeout(check_load_timeout,window.cadesplugin_load_timeout):setTimeout(check_load_timeout,2e4),set_constantValues(),cadesplugin.current_log_level=cadesplugin.LOG_LEVEL_ERROR,window.cadesplugin=cadesplugin,check_plugin_working()}function check_browser(){var e,t=navigator.userAgent,n=t.match(/(opera|yabrowser|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:e[1]||""}):"Chrome"===n[1]&&(e=t.match(/\b(OPR|Edg|YaBrowser)\/(\d+)/),null!=e)?{name:e[1].replace("OPR","Opera"),version:e[2]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})}function cpcsp_console_log(e,t){if("undefined"!==typeof console)return e<=cadesplugin.current_log_level?(e===cadesplugin.LOG_LEVEL_DEBUG&&console.log("DEBUG: %s",t),e===cadesplugin.LOG_LEVEL_INFO&&console.info("INFO: %s",t),void(e===cadesplugin.LOG_LEVEL_ERROR&&console.error("ERROR: %s",t))):void 0}function set_log_level(e){e===cadesplugin.LOG_LEVEL_DEBUG||e===cadesplugin.LOG_LEVEL_INFO||e===cadesplugin.LOG_LEVEL_ERROR?(cadesplugin.current_log_level=e,cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_DEBUG&&cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = DEBUG"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_INFO&&cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = INFO"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_ERROR&&cpcsp_console_log(cadesplugin.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = ERROR"),isNativeMessageSupported()&&(cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_DEBUG&&window.postMessage("set_log_level=debug","*"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_INFO&&window.postMessage("set_log_level=info","*"),cadesplugin.current_log_level===cadesplugin.LOG_LEVEL_ERROR&&window.postMessage("set_log_level=error","*"))):cpcsp_console_log(cadesplugin.LOG_LEVEL_ERROR,"cadesplugin_api.js: Incorrect log_level: "+e)}function set_constantValues(){cadesplugin.CAPICOM_MEMORY_STORE=0,cadesplugin.CAPICOM_LOCAL_MACHINE_STORE=1,cadesplugin.CAPICOM_CURRENT_USER_STORE=2,cadesplugin.CADESCOM_MEMORY_STORE=0,cadesplugin.CADESCOM_LOCAL_MACHINE_STORE=1,cadesplugin.CADESCOM_CURRENT_USER_STORE=2,cadesplugin.CADESCOM_CONTAINER_STORE=100,cadesplugin.CAPICOM_MY_STORE="My",cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED=2,cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED=0,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING=1,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE=2,cadesplugin.CADESCOM_XADES_DEFAULT=16,cadesplugin.CADESCOM_XADES_BES=32,cadesplugin.CADESCOM_XADES_T=80,cadesplugin.CADESCOM_XADES_X_LONG_TYPE_1=1488,cadesplugin.CADESCOM_XMLDSIG_TYPE=0,cadesplugin.XmlDsigGost3410UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411",cadesplugin.XmlDsigGost3411UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr3411",cadesplugin.XmlDsigGost3410Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411",cadesplugin.XmlDsigGost3411Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411",cadesplugin.XmlDsigGost3411Url2012256="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-256",cadesplugin.XmlDsigGost3410Url2012256="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-256",cadesplugin.XmlDsigGost3411Url2012512="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34112012-512",cadesplugin.XmlDsigGost3410Url2012512="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102012-gostr34112012-512",cadesplugin.CADESCOM_CADES_DEFAULT=0,cadesplugin.CADESCOM_CADES_BES=1,cadesplugin.CADESCOM_CADES_T=5,cadesplugin.CADESCOM_CADES_X_LONG_TYPE_1=93,cadesplugin.CADESCOM_PKCS7_TYPE=65535,cadesplugin.CADESCOM_ENCODE_BASE64=0,cadesplugin.CADESCOM_ENCODE_BINARY=1,cadesplugin.CADESCOM_ENCODE_ANY=-1,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT=0,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN=1,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY=2,cadesplugin.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME=0,cadesplugin.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME=1,cadesplugin.CAPICOM_CERTIFICATE_FIND_SHA1_HASH=0,cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1,cadesplugin.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME=2,cadesplugin.CAPICOM_CERTIFICATE_FIND_ROOT_NAME=3,cadesplugin.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME=4,cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENSION=5,cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY=6,cadesplugin.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY=7,cadesplugin.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY=8,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_VALID=9,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID=10,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED=11,cadesplugin.CAPICOM_CERTIFICATE_FIND_KEY_USAGE=12,cadesplugin.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE=128,cadesplugin.CAPICOM_PROPID_ENHKEY_USAGE=9,cadesplugin.CAPICOM_OID_OTHER=0,cadesplugin.CAPICOM_OID_KEY_USAGE_EXTENSION=10,cadesplugin.CAPICOM_EKU_CLIENT_AUTH=2,cadesplugin.CAPICOM_EKU_SMARTCARD_LOGON=5,cadesplugin.CAPICOM_EKU_OTHER=0,cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0,cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1,cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=2,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=2,cadesplugin.CADESCOM_ATTRIBUTE_OTHER=-1,cadesplugin.CADESCOM_STRING_TO_UCS2LE=0,cadesplugin.CADESCOM_BASE64_TO_BINARY=1,cadesplugin.CADESCOM_DISPLAY_DATA_NONE=0,cadesplugin.CADESCOM_DISPLAY_DATA_CONTENT=1,cadesplugin.CADESCOM_DISPLAY_DATA_ATTRIBUTE=2,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC2=0,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC4=1,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_DES=2,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_3DES=3,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_AES=4,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89=25,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA1=0,cadesplugin.CADESCOM_HASH_ALGORITHM_MD2=1,cadesplugin.CADESCOM_HASH_ALGORITHM_MD4=2,cadesplugin.CADESCOM_HASH_ALGORITHM_MD5=3,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_256=4,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_384=5,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_512=6,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411=100,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256=101,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512=102,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_HMAC=110,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256_HMAC=111,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512_HMAC=112,cadesplugin.LOG_LEVEL_DEBUG=4,cadesplugin.LOG_LEVEL_INFO=2,cadesplugin.LOG_LEVEL_ERROR=1,cadesplugin.CADESCOM_AllowNone=0,cadesplugin.CADESCOM_AllowNoOutstandingRequest=1,cadesplugin.CADESCOM_AllowUntrustedCertificate=2,cadesplugin.CADESCOM_AllowUntrustedRoot=4,cadesplugin.CADESCOM_SkipInstallToStore=268435456,cadesplugin.ENABLE_CARRIER_TYPE_CSP=1,cadesplugin.ENABLE_CARRIER_TYPE_FKC_NO_SM=2,cadesplugin.ENABLE_CARRIER_TYPE_FKC_SM=4,cadesplugin.ENABLE_ANY_CARRIER_TYPE=7,cadesplugin.DISABLE_EVERY_CARRIER_OPERATION=0,cadesplugin.ENABLE_CARRIER_OPEN_ENUM=1,cadesplugin.ENABLE_CARRIER_CREATE=2,cadesplugin.ENABLE_ANY_OPERATION=3,cadesplugin.CADESCOM_PRODUCT_CSP=0,cadesplugin.CADESCOM_PRODUCT_OCSP=1,cadesplugin.CADESCOM_PRODUCT_TSP=2,cadesplugin.MEDIA_TYPE_REGISTRY=1,cadesplugin.MEDIA_TYPE_HDIMAGE=2,cadesplugin.MEDIA_TYPE_CLOUD=4,cadesplugin.MEDIA_TYPE_SCARD=8,cadesplugin.XCN_CRYPT_STRING_BASE64HEADER=0,cadesplugin.AT_KEYEXCHANGE=1,cadesplugin.AT_SIGNATURE=2}function async_spawn(e){function t(e,t){var c;try{c=n[e](t)}catch(s){return Promise.reject(s)}return c.done?c.value:Promise.resolve(c.value).then(a,r)}var n=e(Array.prototype.slice.call(arguments,1)),a=t.bind(t,"next"),r=t.bind(t,"throw");return a()}function isIE(){return"IE"===browserSpecs.name||"MSIE"===browserSpecs.name}function isIOS(){return navigator.userAgent.match(/ipod/i)||navigator.userAgent.match(/ipad/i)||navigator.userAgent.match(/iphone/i)}function isNativeMessageSupported(){return!isIE()&&("Edg"===browserSpecs.name||("YaBrowser"===browserSpecs.name?(isYandex=!0,!0):"Opera"===browserSpecs.name?(isOpera=!0,browserSpecs.version>=33):"Firefox"===browserSpecs.name?(isFireFox=!0,browserSpecs.version>=52):"Chrome"===browserSpecs.name?browserSpecs.version>=42:"Safari"===browserSpecs.name?(isSafari=!0,browserSpecs.version>=12):void 0))}function CreateObject(e){if(isIOS())return call_ru_cryptopro_npcades_10_native_bridge("CreateObject",[e]);if(isIE()){if(e.match(/X509Enrollment/i))try{var t=document.getElementById("webClassFactory");return t.CreateObject(e)}catch(a){try{var n=document.getElementById("certEnrollClassFactory");return n.CreateObject(e)}catch(r){throw"Для создания обьектов X509Enrollment следует настроить веб-узел на использование проверки подлинности по протоколу HTTPS"}}try{n=document.getElementById("webClassFactory");return n.CreateObject(e)}catch(a){return new ActiveXObject(e)}}return pluginObject.CreateObject(e)}function decimalToHexString(e){return e<0&&(e=4294967295+e+1),e.toString(16).toUpperCase()}function GetMessageFromException(e){var t=e.message;return t?e.number&&(t+=" (0x"+decimalToHexString(e.number)+")"):t=e,t}function getLastError(e){if(isNativeMessageSupported()||isIE()||isIOS())return GetMessageFromException(e);try{return pluginObject.getLastError()}catch(t){return GetMessageFromException(e)}}function ReleasePluginObjects(){return cpcsp_chrome_nmcades.ReleasePluginObjects()}function CreateObjectAsync(e){return pluginObject.CreateObjectAsync(e)}function call_ru_cryptopro_npcades_10_native_bridge(functionName,array){var tmpobj,ex;if(ru_cryptopro_npcades_10_native_bridge.call(functionName,array,(function(e,response){ex=e;var str="tmpobj="+response;eval(str),"string"===typeof tmpobj&&(tmpobj=tmpobj.replace(/\\\n/gm,"\n"),tmpobj=tmpobj.replace(/\\\r/gm,"\r"))})),ex)throw ex;return tmpobj}function show_firefox_missing_extension_dialog(){if(!window.cadesplugin_skip_extension_install){var e=document.createElement("div");e.id="cadesplugin_ovr",e.style="visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)",e.innerHTML="<div id='cadesplugin_ovr_item' style='position:relative; width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'><button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X</button><p>Для работы КриптоПро ЭЦП Browser plugin на данном сайте необходимо расширение для браузера. Убедитесь, что оно у Вас включено или установите его.<p><a href='https://www.cryptopro.ru/sites/default/files/products/cades/extensions/firefox_cryptopro_extension_latest.xpi'>Скачать расширение</a></p></div>",document.getElementsByTagName("Body")[0].appendChild(e),document.getElementById("cadesplugin_close_install").addEventListener("click",(function(){plugin_loaded_error("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"})),e.addEventListener("click",(function(){plugin_loaded_error("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"})),e.style.visibility="visible"}}function firefox_or_safari_nmcades_onload(){cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded,plugin_loaded_error)}function nmcades_api_onload(){window.postMessage("cadesplugin_echo_request","*"),window.addEventListener("message",(function(e){if("string"===typeof e.data&&e.data.match("cadesplugin_loaded")&&!cadesplugin_loaded_event_recieved){if(isFireFox||isSafari){var t=e.data.substring(e.data.indexOf("url:")+4);if(!t.match("^moz-extension://[a-zA-Z0-9-]+/nmcades_plugin_api.js$")&&!t.match("^safari-extension://[a-zA-Z0-9-]+/[a-zA-Z0-9]+/nmcades_plugin_api.js$"))return cpcsp_console_log(cadesplugin.LOG_LEVEL_ERROR,'Bad url "'+t+'" for load CryptoPro Extension for CAdES Browser plug-in'),void plugin_loaded_error();var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",t),n.onerror=plugin_loaded_error,n.onload=firefox_or_safari_nmcades_onload,document.getElementsByTagName("head")[0].appendChild(n)}else cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded,plugin_loaded_error);cadesplugin_loaded_event_recieved=!0}}),!1)}function load_extension(){if(isFireFox||isSafari)nmcades_api_onload();else if(isOpera||isYandex){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js"),e.onerror=plugin_loaded_error,e.onload=nmcades_api_onload,document.getElementsByTagName("head")[0].appendChild(e)}else{e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js"),e.onerror=plugin_loaded_error,e.onload=nmcades_api_onload,document.getElementsByTagName("head")[0].appendChild(e)}}function load_npapi_plugin(){var e=document.createElement("object");if(e.setAttribute("id","cadesplugin_object"),e.setAttribute("type","application/x-cades"),e.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(e),pluginObject=document.getElementById("cadesplugin_object"),isIE()){var t=document.createElement("object");t.setAttribute("id","certEnrollClassFactory"),t.setAttribute("classid","clsid:884e2049-217d-11da-b2a4-000e7bbb2b09"),t.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(t);var n=document.createElement("object");n.setAttribute("id","webClassFactory"),n.setAttribute("classid","clsid:B04C8637-10BD-484E-B0DA-B8A039F60024"),n.setAttribute("style","visibility: hidden"),document.getElementsByTagName("body")[0].appendChild(n)}}function plugin_loaded(){plugin_resolved=1,canPromise?plugin_resolve():window.postMessage("cadesplugin_loaded","*")}function plugin_loaded_error(e){"undefined"!==typeof e&&"object"!==_typeof(e)||(e="Плагин недоступен"),plugin_resolved=1,canPromise?plugin_reject(e):window.postMessage("cadesplugin_load_error","*")}function check_load_timeout(){1!==plugin_resolved&&(isFireFox&&show_firefox_missing_extension_dialog(),plugin_resolved=1,canPromise?plugin_reject("Истекло время ожидания загрузки плагина"):window.postMessage("cadesplugin_load_error","*"))}function createPromise(e){return new Promise(e)}function check_npapi_plugin(){try{CreateObject("CAdESCOM.About");plugin_loaded()}catch(n){document.getElementById("cadesplugin_object").style.display="none";var e=navigator.mimeTypes["application/x-cades"];if(e){var t=e.enabledPlugin;plugin_loaded_error(t?"Плагин загружен, но не создаются обьекты":"Ошибка при загрузке плагина")}else plugin_loaded_error("Плагин недоступен")}}function check_plugin_working(){var e=document.createElement("div");e.innerHTML="\x3c!--[if lt IE 9]><i></i><![endif]--\x3e";var t=1===e.getElementsByTagName("i").length;t?plugin_loaded_error("Internet Explorer версии 8 и ниже не поддерживается"):isNativeMessageSupported()?load_extension():canPromise?"complete"===document.readyState?(load_npapi_plugin(),check_npapi_plugin()):window.addEventListener("load",(function(e){load_npapi_plugin(),check_npapi_plugin()}),!1):window.addEventListener("message",(function(e){"cadesplugin_echo_request"===e.data&&(load_npapi_plugin(),check_npapi_plugin())}),!1)}function set_pluginObject(e){pluginObject=e}function is_capilite_enabled(){return!("undefined"===typeof cadesplugin.EnableInternalCSP||!cadesplugin.EnableInternalCSP)}}()},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),r=n("6c02"),c={class:"card"},s=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"smevsign-web: демонстрация возможностей rest api smevsign")],-1),l={class:"card-content"},i={class:"card-body"},u=Object(a["f"])("p",null,"Для начала работы укажите адрес tomcat с smevsign",-1),o={class:"form-group row align-items-center"},d=Object(a["f"])("div",{class:"col-lg-2 col-2"},[Object(a["f"])("label",{class:"col-form-label"},"backendUrl")],-1),p={class:"col-lg-8 col-8"},_={class:"col-lg-2 col-2"},b=Object(a["f"])("i",{class:"fa fa-save"},null,-1),f=[b],O=Object(a["g"])("   "),g=Object(a["f"])("i",{class:"fa fa-trash"},null,-1),m=[g],v=Object(a["f"])("hr",null,null,-1),j=Object(a["f"])("p",null,[Object(a["f"])("i",{class:"fa fa-github"}),Object(a["g"])(),Object(a["f"])("a",{target:"_blank",href:"https://github.com/noadavis/smevsign"},"smevsign: rest api система подписания")],-1),E=Object(a["f"])("p",null,"git clone https://github.com/noadavis/smevsign.git",-1),C=Object(a["f"])("p",null,[Object(a["f"])("i",{class:"fa fa-github"}),Object(a["g"])(),Object(a["f"])("a",{target:"_blank",href:"https://github.com/noadavis/smevsign-web"},"smevsign-web: web интерфейс для smevsign")],-1),h=Object(a["f"])("p",null,"git clone https://github.com/noadavis/smevsign-web.git",-1);function A(e,t,n,r,b,g){return Object(a["s"])(),Object(a["e"])("div",c,[s,Object(a["f"])("div",l,[Object(a["f"])("div",i,[u,Object(a["f"])("div",o,[d,Object(a["f"])("div",p,[Object(a["G"])(Object(a["f"])("input",{type:"text",id:"backUrl",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.backUrl=e})},null,512),[[a["D"],r.backUrl]])]),Object(a["f"])("div",_,[Object(a["f"])("a",{href:"#",title:"Сохранить",class:"btn btn-primary btn-sm",onClick:t[1]||(t[1]=Object(a["H"])((function(){return r.saveBackendUrl&&r.saveBackendUrl.apply(r,arguments)}),["prevent"]))},f),O,Object(a["f"])("a",{href:"#",title:"Удалить",class:"btn btn-danger btn-sm",onClick:t[2]||(t[2]=Object(a["H"])((function(){return r.deleteBackendUrl&&r.deleteBackendUrl.apply(r,arguments)}),["prevent"]))},m)])]),v,j,E,C,h])])])}var I=n("1da1"),T=(n("96cf"),n("5502")),S={setup:function(){var e=Object(a["v"])(),t=Object(T["b"])();function n(){localStorage.setItem("backendUrl",e.value),t.dispatch("updateBackendUrl",e.value)}function r(){localStorage.removeItem("backendUrl"),t.dispatch("updateBackendUrl","http://127.0.0.1:8080/api/"),e.value="http://127.0.0.1:8080/api/"}return Object(a["q"])(Object(I["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.dispatch("updatePageHeader","Home"),e.value=t.getters.getBackendUrl;case 2:case"end":return n.stop()}}),n)})))),{saveBackendUrl:n,deleteBackendUrl:r,backUrl:e}}},y=n("d959"),x=n.n(y);const R=x()(S,[["render",A]]);var M=R,w={class:"card"},k=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"Создание и подпись xml по бизнес данным")],-1),D={class:"card-content"},N={class:"card-body"},P={class:"form form-horizontal"},L={class:"form-body"},U={class:"row"},H=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Подпись")],-1),G={class:"col-md-9 form-group"},F=["value"],B=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Схема СМЭВ3")],-1),Y={class:"col-md-9 form-group"},V=["value"],X={class:"col-md-3"},q=Object(a["f"])("label",null,"MessageId, uuid.v1",-1),z={style:{float:"right"}},K=Object(a["f"])("i",{class:"fa fa-lg fa-gear"},null,-1),J=[K],W={class:"col-md-9 form-group"},Z=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Бизнес данные, в base64")],-1),Q={class:"col-md-9 form-group"},$=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),ee={class:"col-md-9 form-group"},te=Object(a["f"])("i",{class:"fa fa-lg fa-indent"},null,-1),ne=Object(a["g"])(" Форматировать"),ae=[te,ne],re=Object(a["g"])("  "),ce=Object(a["f"])("i",{class:"fa fa-lg fa-dedent"},null,-1),se=Object(a["g"])(" Минимизировать"),le=[ce,se],ie=Object(a["g"])("     "),ue=Object(a["f"])("i",{class:"fa fa-lg fa-file-archive-o"},null,-1),oe=Object(a["g"])(" Текст в base64"),de=[ue,oe],pe=Object(a["g"])("  "),_e=Object(a["f"])("i",{class:"fa fa-lg fa-file-text-o"},null,-1),be=Object(a["g"])(" base64 в текст"),fe=[_e,be],Oe=Object(a["f"])("hr",null,null,-1),ge=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),me={class:"col-md-9 form-group"},ve={class:"form-check"},je={class:"checkbox"},Ee=Object(a["f"])("label",{for:"usepersonal"},"Подписать бизнес данные пользовательской подписью",-1),Ce={key:0,class:"formRow"},he=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Пользовательская подпись")],-1),Ae={class:"col-md-9 form-group"},Ie=["value"],Te=Object(a["f"])("hr",null,null,-1),Se=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),ye={class:"col-md-9 form-group"},xe=Object(a["f"])("hr",null,null,-1),Re=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Результат")],-1),Me={class:"col-md-9 form-group"},we=Object(a["f"])("p",{style:{"padding-top":"20px"}},[Object(a["f"])("a",{target:"_blank",href:"http://qs.cryptopro.ru/SVS/Verify/"},"Проверка подписанной xml")],-1);function ke(e,t,n,r,c,s){return Object(a["s"])(),Object(a["e"])("div",w,[k,Object(a["f"])("div",D,[Object(a["f"])("div",N,[Object(a["f"])("form",P,[Object(a["f"])("div",L,[Object(a["f"])("div",U,[H,Object(a["f"])("div",G,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"container",name:"container","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.container=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(r.containers.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,F)})),128))],512),[[a["C"],r.container]])]),B,Object(a["f"])("div",Y,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"scheme",name:"scheme","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.scheme=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(r.smevscheme.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,V)})),128))],512),[[a["C"],r.scheme]])]),Object(a["f"])("div",X,[q,Object(a["f"])("div",z,[Object(a["f"])("a",{onClick:t[2]||(t[2]=Object(a["H"])((function(){return r.GenerateUuid&&r.GenerateUuid.apply(r,arguments)}),["prevent"])),class:"btn btn-info btn-sm me-1 mb-1"},J)])]),Object(a["f"])("div",W,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"uuid",name:"uuid","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.uuid=e})},null,512),[[a["D"],r.uuid]])]),Z,Object(a["f"])("div",Q,[Object(a["G"])(Object(a["f"])("textarea",{id:"bdata",class:"form-control",name:"bdata","onUpdate:modelValue":t[4]||(t[4]=function(e){return r.bdata=e}),spellcheck:"false",style:{height:"250px"}},null,512),[[a["D"],r.bdata]])]),$,Object(a["f"])("div",ee,[Object(a["f"])("a",{class:"btn btn-primary",onClick:t[5]||(t[5]=Object(a["H"])((function(){return r.TextFormat&&r.TextFormat.apply(r,arguments)}),["prevent"])),id:"xml"},ae),re,Object(a["f"])("a",{class:"btn btn-primary",onClick:t[6]||(t[6]=Object(a["H"])((function(){return r.TextMinimize&&r.TextMinimize.apply(r,arguments)}),["prevent"])),id:"xmlmin"},le),ie,Object(a["f"])("a",{class:"btn btn-primary",onClick:t[7]||(t[7]=Object(a["H"])((function(){return r.TextToBase64&&r.TextToBase64.apply(r,arguments)}),["prevent"])),id:"tobase64"},de),pe,Object(a["f"])("a",{class:"btn btn-primary",onClick:t[8]||(t[8]=Object(a["H"])((function(){return r.Base64ToText&&r.Base64ToText.apply(r,arguments)}),["prevent"])),id:"frombase64"},fe)]),Oe,ge,Object(a["f"])("div",me,[Object(a["f"])("div",ve,[Object(a["f"])("div",je,[Object(a["G"])(Object(a["f"])("input",{onChange:t[9]||(t[9]=function(){return r.updateUserCertificates&&r.updateUserCertificates.apply(r,arguments)}),type:"checkbox",id:"usepersonal",class:"form-check-input","onUpdate:modelValue":t[10]||(t[10]=function(e){return r.usepersonal=e})},null,544),[[a["B"],r.usepersonal]]),Ee])])]),r.usepersonal?(Object(a["s"])(),Object(a["e"])("div",Ce,[he,Object(a["f"])("div",Ae,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"personal",name:"personal","onUpdate:modelValue":t[11]||(t[11]=function(e){return r.personal=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(r.personalCertificates.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.id,key:e.id},Object(a["z"])(e.value),9,Ie)})),128))],512),[[a["C"],r.personal]])])])):Object(a["d"])("",!0),Te,Se,Object(a["f"])("div",ye,[Object(a["f"])("a",{onClick:t[12]||(t[12]=Object(a["H"])((function(){return r.SubmitForm&&r.SubmitForm.apply(r,arguments)}),["prevent"])),class:"btn btn-primary me-1 mb-1"},"Создать xml")]),xe,Re,Object(a["f"])("div",Me,[Object(a["G"])(Object(a["f"])("textarea",{id:"result",class:"form-control",name:"result","onUpdate:modelValue":t[13]||(t[13]=function(e){return r.result=e}),spellcheck:"false",style:{height:"250px"}},null,512),[[a["D"],r.result]]),we])])])])])])])}var De=n("b85c"),Ne=(n("b64b"),n("d4ec")),Pe=n("bee2"),Le=(n("caad"),n("2532"),function(){function e(){Object(Ne["a"])(this,e),this.crypto=window.cadesplugin}return Object(Pe["a"])(e,[{key:"getUserCertificates",value:function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,c,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.crypto.CreateObjectAsync("CAdESCOM.Store");case 2:return n=e.sent,n.Open(this.crypto.CAPICOM_CURRENT_USER_STORE,this.crypto.CAPICOM_MY_STORE,this.crypto.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED),e.next=6,n.Certificates;case 6:return a=e.sent,e.next=9,a.Find(this.crypto.CAPICOM_CERTIFICATE_FIND_TIME_VALID);case 9:a=e.sent,r=[],c=1;case 12:return e.t0=c,e.next=15,a.Count;case 15:if(e.t1=e.sent,!(e.t0<=e.t1)){e.next=32;break}return e.next=19,a.Item(c);case 19:return s=e.sent,e.next=22,this.getCertificateAlgorithm(s);case 22:if(l=e.sent,!l.includes(t)){e.next=29;break}return e.t2=r,e.next=27,this.getCertificateInfo(s,l);case 27:e.t3=e.sent,e.t2.push.call(e.t2,e.t3);case 29:c+=1,e.next=12;break;case 32:return e.next=34,n.Close();case 34:return e.abrupt("return",r);case 35:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUserCertificate",value:function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.crypto.CreateObjectAsync("CAdESCOM.Store");case 2:return n=e.sent,n.Open(this.crypto.CAPICOM_CURRENT_USER_STORE,this.crypto.CAPICOM_MY_STORE,this.crypto.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED),e.next=6,n.Certificates;case 6:return a=e.sent,e.next=9,a.Find(this.crypto.CAPICOM_CERTIFICATE_FIND_SHA1_HASH,t);case 9:return a=e.sent,e.next=12,a.Count;case 12:return r=e.sent,e.next=15,n.Close();case 15:if(0!==r){e.next=17;break}return e.abrupt("return",void 0);case 17:return e.abrupt("return",a.Item(1));case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"signSignedInfoDigest",value:function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(t,n,a){var r,c,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUserCertificate(t);case 2:return r=e.sent,e.next=5,r.Export(0);case 5:return c=e.sent,e.next=8,this.crypto.CreateObjectAsync("CAdESCOM.HashedData");case 8:if(s=e.sent,!n.includes("256")){e.next=14;break}return e.next=12,s.propset_Algorithm(this.crypto.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256);case 12:e.next=17;break;case 14:if(!n.includes("512")){e.next=17;break}return e.next=17,s.propset_Algorithm(this.crypto.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512);case 17:return e.next=19,s.SetHashValue(a);case 19:return e.next=21,this.crypto.CreateObjectAsync("CAdESCOM.RawSignature");case 21:return l=e.sent,e.prev=22,e.next=25,l.SignHash(s,r);case 25:return e.t0=e.sent,e.t1=c,e.abrupt("return",{hex:e.t0,cert:e.t1});case 30:e.prev=30,e.t2=e["catch"](22),console.log("Failed to create signature. Error: "+this.crypto.getLastError(e.t2));case 33:return e.abrupt("return",void 0);case 34:case"end":return e.stop()}}),e,this,[[22,30]])})));function t(t,n,a){return e.apply(this,arguments)}return t}()},{key:"getCertificateAlgorithm",value:function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.PublicKey();case 2:return n=e.sent,e.next=5,n.Algorithm;case 5:return a=e.sent,e.next=8,a.FriendlyName;case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCertificateInfo",value:function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.SubjectName;case 2:return e.t0=e.sent,e.next=5,t.Thumbprint;case 5:return e.t1=e.sent,e.next=8,t.ValidToDate;case 8:return e.t2=e.sent,e.t3=n,e.abrupt("return",{subject:e.t0,thumbprint:e.t1,validTo:e.t2,algorithm:e.t3});case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}()),Ue=n("3835"),He=(n("4fad"),n("d3b7"),n("ac1f"),n("466d"),n("4d63"),n("25f0"),n("bc3a")),Ge=n.n(He),Fe=function(){function e(t){Object(Ne["a"])(this,e),this.axios=Ge.a,this.apiurl=t,this.config={headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}}}return Object(Pe["a"])(e,[{key:"load",value:function(e,t){var n=this;console.log("ApiHandler: load"),console.log(t);for(var a=new FormData,r=0,c=Object.entries(t);r<c.length;r++){var s=Object(Ue["a"])(c[r],2),l=s[0],i=s[1];a.append(l,i)}return new Promise((function(t,r){n.axios.post(n.apiurl+e,a).then((function(e){200===e.status&&e.data?t(e.data):r("response.status: "+e.status)})).catch((function(e){r("internal error: "+e)}))}))}},{key:"json",value:function(e,t){var n=this;console.log("ApiHandler: json"),console.log(t);var a=JSON.stringify(t);return new Promise((function(t,r){n.axios.post(n.apiurl+e,a).then((function(e){200===e.status&&e.data?t(e.data):r("response.status: "+e.status)})).catch((function(e){r("internal error: "+e)}))}))}},{key:"get",value:function(e){var t=this;return new Promise((function(n,a){t.axios.get(t.apiurl+e).then((function(e){200===e.status&&e.data?n(e.data):a("response.status: "+e.status)})).catch((function(e){a("internal error: "+e)}))}))}},{key:"getCookieByName",value:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:""}}]),e}(),Be=(n("1276"),n("5319"),n("841c"),n("fb6a"),function(){function e(){Object(Ne["a"])(this,e)}return Object(Pe["a"])(e,[{key:"createShiftArr",value:function(){for(var e=["\n"],t=0;t<100;t++)e.push(e[t]+"    ");return e}},{key:"prettyXml",value:function(e){var t=this.createShiftArr(),n=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),a=n.length,r=!1,c=0,s="",l=0;for(l=0;l<a;l++)n[l].search(/<!/)>-1?(s+=t[c]+n[l],r=!0,(n[l].search(/-->/)>-1||n[l].search(/\]>/)>-1||n[l].search(/!DOCTYPE/)>-1)&&(r=!1)):n[l].search(/-->/)>-1||n[l].search(/\]>/)>-1?(s+=n[l],r=!1):/^<\w/.exec(n[l-1])&&/^<\/\w/.exec(n[l])&&/^<[\w:\-\.\,]+/.exec(n[l-1])==/^<\/[\w:\-\.\,]+/.exec(n[l])[0].replace("/","")?(s+=n[l],r||c--):n[l].search(/<\w/)>-1&&-1==n[l].search(/<\//)&&-1==n[l].search(/\/>/)?s=s+=r?n[l]:t[c++]+n[l]:n[l].search(/<\w/)>-1&&n[l].search(/<\//)>-1?s=s+=r?n[l]:t[c]+n[l]:n[l].search(/<\//)>-1?s=s+=r?n[l]:t[--c]+n[l]:n[l].search(/\/>/)>-1?s=s+=r?n[l]:t[c]+n[l]:n[l].search(/<\?/)>-1||n[l].search(/xmlns\:/)>-1||n[l].search(/xmlns\=/)>-1?s+=t[c]+n[l]:s+=n[l];return"\n"==s[0]?s.slice(1):s}},{key:"xmlMin",value:function(e){var t=e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"");return t=t.replace(/[ \r\n\t]{1,}xmlns/g," xmlns"),t=t.replace(/[ \r\n\t]+\</g,"<"),t.replace(/>\s{0,}</g,"><")}},{key:"base64Encode",value:function(e){var t,n,a,r,c,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",i="",u="",o=0;do{t=e.charCodeAt(o++),n=e.charCodeAt(o++),i=e.charCodeAt(o++),a=t>>2,r=(3&t)<<4|n>>4,c=(15&n)<<2|i>>6,u=63&i,isNaN(n)?c=u=64:isNaN(i)&&(u=64),l=l+s.charAt(a)+s.charAt(r)+s.charAt(c)+s.charAt(u),t=n=i="",a=r=c=u=""}while(o<e.length);return l}},{key:"base64Decode",value:function(e){var t,n,a,r,c,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",i="",u="",o=0,d=/[^A-Za-z0-9\+\/\=]/g;if(d.exec(e))return null;do{a=s.indexOf(e.charAt(o++)),r=s.indexOf(e.charAt(o++)),c=s.indexOf(e.charAt(o++)),u=s.indexOf(e.charAt(o++)),t=a<<2|r>>4,n=(15&r)<<4|c>>2,i=(3&c)<<6|u,l+=String.fromCharCode(t),64!=c&&(l+=String.fromCharCode(n)),64!=u&&(l+=String.fromCharCode(i)),t=n=i="",a=r=c=u=""}while(o<e.length);return l}},{key:"reverse",value:function(e){var t,n="";for(t=e.length-1;t>=0;t--)n+=e.charAt(t);return n}},{key:"d2h",value:function(e){var t=e.toString(16).toUpperCase();return 1==t.length&&(t="0"+t),t}},{key:"stringToHex",value:function(e){for(var t="",n=0;n<e.length;n++)t+=this.d2h(e.charCodeAt(n));return t}},{key:"hexToString",value:function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}}]),e}()),Ye=n("11c1"),Ve=n("e762");n("1589");var Xe={setup:function(){var e=Object(T["b"])(),t=Object(a["v"])(),n=Object(a["u"])({value:[]}),r=Object(a["v"])(),c=Object(a["v"])(),s=Object(a["u"])({value:[]}),l=Object(a["v"])(),i=Object(a["u"])({value:[{key:"1",value:"1.1"},{key:"2",value:"1.2"},{key:"3",value:"1.3"}]}),u=Object(a["v"])(),o=Object(a["v"])(),d=Object(a["v"])(),p=new Fe(e.getters.getBackendUrl),_=new Be,b=new Le,f={"ГОСТ Р 34.10-2012 256 бит":"GOST3410_2012_256","ГОСТ Р 34.10-2012 512 бит":"GOST3410_2012_512"};function O(){return g.apply(this,arguments)}function g(){return g=Object(I["a"])(regeneratorRuntime.mark((function e(){var a,s,i,f,O,g,v,j,E,C,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.value){e.next=3;break}return d.value="Бизнес данные пусты!",e.abrupt("return");case 3:if(o.value){e.next=6;break}return d.value="MessageId не указан!",e.abrupt("return");case 6:if(a={request_type:"sign_xml",data:t.value,sign_alias:l.value,options:{data_type:"SendRequestRequest",sign_type:"create",uuid:o.value,xml_scheme:u.value}},!c.value){e.next=25;break}return e.next=10,m();case 10:if(s=e.sent,0!=Object.keys(s).length){e.next=14;break}return d.value="digest для подписи не получен",e.abrupt("return");case 14:return i=n.value[r.value].thumbprint,f=n.value[r.value].algorithm,O=_.base64Decode(s[f].signedInfoDigest),g=_.stringToHex(O),e.next=20,b.signSignedInfoDigest(i,f,g);case 20:v=e.sent,j=_.hexToString(v.hex),E=_.reverse(j),C=_.base64Encode(E),a["personal_sign"]={digest_value:s[f].digest,certificate:v.cert,algorithm:f,signature_value:C};case 25:return e.next=27,p.json("/sign",a);case 27:h=e.sent,h.error?d.value=h.error_description:d.value=Ve["a"].decode(h.full_xml);case 29:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return v=Object(I["a"])(regeneratorRuntime.mark((function e(){var n,a,r,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},e.next=3,p.json("/sign",{request_type:"sign_xml",data:t.value,options:{sign_type:"digest"}});case 3:if(a=e.sent,a.error)d.value=a.error_description;else{r=Object(De["a"])(a.digest);try{for(r.s();!(c=r.n()).done;)s=c.value,n[s.algorithm]={digest:s.value,signedInfoDigest:s.signed_info}}catch(l){r.e(l)}finally{r.f()}}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function j(){o.value=Object(Ye["v1"])()}function E(){t.value&&(t.value=_.prettyXml(t.value))}function C(){t.value&&(t.value=_.xmlMin(t.value))}function h(){t.value&&(t.value=Ve["a"].encode(t.value))}function A(){t.value&&(t.value=Ve["a"].decode(t.value))}function S(){return y.apply(this,arguments)}function y(){return y=Object(I["a"])(regeneratorRuntime.mark((function e(){var t,a,s,l,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!c.value){e.next=8;break}return e.next=3,b.getUserCertificates("34.10-2012");case 3:t=e.sent,a=0,s=Object(De["a"])(t);try{for(s.s();!(l=s.n()).done;)i=l.value,n.value.push({id:a,thumbprint:i.thumbprint,value:i.subject+" / "+i.validTo,algorithm:f[i.algorithm]}),a++}catch(u){s.e(u)}finally{s.f()}n.value.length>0&&(r.value=n.value[0].id);case 8:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}return Object(a["q"])(Object(I["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("onMounted SignForm"),e.dispatch("updatePageHeader","Создать xml"),t.next=4,p.get("containers");case 4:n=t.sent,s.value=n,s.value.length>0&&(l.value=s.value[0].value),u.value=i.value[0].value;case 8:case"end":return t.stop()}}),t)})))),{bdata:t,smevscheme:i,scheme:u,uuid:o,result:d,container:l,containers:s,usepersonal:c,personal:r,personalCertificates:n,TextFormat:E,TextMinimize:C,TextToBase64:h,Base64ToText:A,SubmitForm:O,GenerateUuid:j,updateUserCertificates:S}}};const qe=x()(Xe,[["render",ke]]);var ze=qe,Ke={class:"card"},Je=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"Переподписание сформированного xml")],-1),We=Object(a["f"])("div",{class:"card-content"},[Object(a["f"])("div",{class:"card-body"},[Object(a["f"])("p",null,"Sign xml")])],-1),Ze=[Je,We];function Qe(e,t,n,r,c,s){return Object(a["s"])(),Object(a["e"])("div",Ke,Ze)}var $e={setup:function(){var e=Object(T["b"])();Object(a["q"])(Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.dispatch("updatePageHeader","Подписание xml");case 1:case"end":return t.stop()}}),t)}))))}};const et=x()($e,[["render",Qe]]);var tt=et,nt={class:"card"},at=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"Xml опроса очереди и подтверждение получения")],-1),rt={class:"card-content"},ct={class:"card-body"},st={class:"form form-horizontal"},lt={class:"form-body"},it={class:"row"},ut=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Подпись")],-1),ot={class:"col-md-9 form-group"},dt=["value"],pt=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Схема СМЭВ3")],-1),_t={class:"col-md-9 form-group"},bt=["value"],ft=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Xml")],-1),Ot={class:"col-md-9 form-group"},gt=["value"],mt={key:0,class:"formRow"},vt={class:"col-md-3"},jt=Object(a["f"])("label",null,"MessageId, uuid.v1",-1),Et={style:{float:"right","padding-right":"20px"}},Ct=Object(a["f"])("i",{class:"fa fa-lg fa-gear"},null,-1),ht=[Ct],At={class:"col-md-9 form-group",style:{"padding-left":"5px"}},It={key:1,class:"formRow"},Tt=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Опрос очереди по ВС: RootElement")],-1),St={class:"col-md-9 form-group",style:{"padding-left":"5px"}},yt=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Опрос очереди по ВС: Namespace")],-1),xt={class:"col-md-9 form-group",style:{"padding-left":"5px"}},Rt=Object(a["f"])("hr",null,null,-1),Mt=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null," ")],-1),wt={class:"col-md-9 form-group"},kt=Object(a["f"])("hr",null,null,-1),Dt=Object(a["f"])("div",{class:"col-md-3"},[Object(a["f"])("label",null,"Результат")],-1),Nt={class:"col-md-9 form-group"},Pt=Object(a["f"])("p",{style:{"padding-top":"20px"}},[Object(a["f"])("a",{target:"_blank",href:"http://qs.cryptopro.ru/SVS/Verify/"},"Проверка подписанной xml")],-1);function Lt(e,t,n,r,c,s){return Object(a["s"])(),Object(a["e"])("div",nt,[at,Object(a["f"])("div",rt,[Object(a["f"])("div",ct,[Object(a["f"])("form",st,[Object(a["f"])("div",lt,[Object(a["f"])("div",it,[ut,Object(a["f"])("div",ot,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"container",name:"container","onUpdate:modelValue":t[0]||(t[0]=function(e){return r.container=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(r.containers.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,dt)})),128))],512),[[a["C"],r.container]])]),pt,Object(a["f"])("div",_t,[Object(a["G"])(Object(a["f"])("select",{class:"form-select",id:"scheme",name:"scheme","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.scheme=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(r.smevscheme.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,bt)})),128))],512),[[a["C"],r.scheme]])]),ft,Object(a["f"])("div",Ot,[Object(a["G"])(Object(a["f"])("select",{onChange:t[2]||(t[2]=function(){return r.xmlChange&&r.xmlChange.apply(r,arguments)}),class:"form-select",id:"xml",name:"xml","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.xml=e})},[(Object(a["s"])(!0),Object(a["e"])(a["a"],null,Object(a["w"])(r.xmltype.value,(function(e){return Object(a["s"])(),Object(a["e"])("option",{value:e.value,key:e.key},Object(a["z"])(e.value),9,gt)})),128))],544),[[a["C"],r.xml]])]),r.isAck?(Object(a["s"])(),Object(a["e"])("div",mt,[Object(a["f"])("div",vt,[jt,Object(a["f"])("div",Et,[Object(a["f"])("a",{onClick:t[4]||(t[4]=Object(a["H"])((function(){return r.GenerateUuid&&r.GenerateUuid.apply(r,arguments)}),["prevent"])),class:"btn btn-info btn-sm me-1 mb-1"},ht)])]),Object(a["f"])("div",At,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"uuid",name:"uuid","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.uuid=e})},null,512),[[a["D"],r.uuid]])])])):(Object(a["s"])(),Object(a["e"])("div",It,[Tt,Object(a["f"])("div",St,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"rootelement",name:"rootelement","onUpdate:modelValue":t[6]||(t[6]=function(e){return r.rootelement=e})},null,512),[[a["D"],r.rootelement]])]),yt,Object(a["f"])("div",xt,[Object(a["G"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"namespace",name:"namespace","onUpdate:modelValue":t[7]||(t[7]=function(e){return r.namespace=e})},null,512),[[a["D"],r.namespace]])])])),Rt,Mt,Object(a["f"])("div",wt,[Object(a["f"])("a",{onClick:t[8]||(t[8]=Object(a["H"])((function(){return r.SubmitForm&&r.SubmitForm.apply(r,arguments)}),["prevent"])),class:"btn btn-primary me-1 mb-1"},"Создать xml")]),kt,Dt,Object(a["f"])("div",Nt,[Object(a["G"])(Object(a["f"])("textarea",{id:"result",class:"form-control",name:"result","onUpdate:modelValue":t[9]||(t[9]=function(e){return r.result=e}),spellcheck:"false",style:{height:"250px"}},null,512),[[a["D"],r.result]]),Pt])])])])])])])}var Ut={setup:function(){var e=Object(T["b"])(),t=Object(a["u"])({value:[]}),n=Object(a["v"])(),r=Object(a["u"])({value:[{key:"1",value:"1.1"},{key:"2",value:"1.2"},{key:"3",value:"1.3"}]}),c=Object(a["v"])(),s=Object(a["u"])({value:[{key:"1",value:"GetRequestRequest"},{key:"2",value:"GetResponseRequest"},{key:"3",value:"AckRequest"}]}),l=Object(a["v"])(),i=Object(a["v"])(),u=Object(a["v"])(),o=Object(a["v"])(),d=Object(a["v"])(!1),p=Object(a["v"])(),_=new Fe(e.getters.getBackendUrl);function b(){return f.apply(this,arguments)}function f(){return f=Object(I["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="queue_xml","AckRequest"!=l.value){e.next=6;break}if(t="ack_xml",i.value){e.next=6;break}return p.value="MessageId не указан!",e.abrupt("return");case 6:return a={request_type:t,sign_alias:n.value,options:{data_type:l.value,uuid:i.value,xml_scheme:c.value}},u.value&&o.value&&(a.options.root_element=u.value,a.options.namespace=o.value),e.next=10,_.json("/sign",a);case 10:r=e.sent,r.error?p.value=r.error_description:p.value=Ve["a"].decode(r.full_xml);case 12:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function O(){i.value=Object(Ye["v1"])()}function g(){d.value="AckRequest"==l.value}return Object(a["q"])(Object(I["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("onMounted QueueXml"),e.dispatch("updatePageHeader","Опрос очереди СМЭВ"),a.next=4,_.get("containers");case 4:i=a.sent,t.value=i,t.value.length>0&&(n.value=t.value[0].value),c.value=r.value[0].value,l.value=s.value[0].value;case 9:case"end":return a.stop()}}),a)})))),{containers:t,container:n,smevscheme:r,scheme:c,uuid:i,result:p,xmltype:s,xml:l,rootelement:u,namespace:o,SubmitForm:b,GenerateUuid:O,isAck:d,xmlChange:g}}};const Ht=x()(Ut,[["render",Lt]]);var Gt=Ht,Ft={class:"card"},Bt=Object(a["f"])("div",{class:"card-header"},[Object(a["f"])("h6",null,"Подпись файла")],-1),Yt=Object(a["f"])("div",{class:"card-content"},[Object(a["f"])("div",{class:"card-body"},[Object(a["f"])("p",null,"Sign file")])],-1),Vt=[Bt,Yt];function Xt(e,t,n,r,c,s){return Object(a["s"])(),Object(a["e"])("div",Ft,Vt)}var qt={setup:function(){var e=Object(T["b"])();Object(a["q"])(Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.dispatch("updatePageHeader","Подпись файла");case 1:case"end":return t.stop()}}),t)}))))}};const zt=x()(qt,[["render",Xt]]);var Kt=zt,Jt=Object(r["a"])({history:Object(r["b"])(),routes:[{name:"home",path:"/",component:M},{name:"create",path:"/create/",component:ze},{name:"sign",path:"/sign/",component:tt},{name:"queue",path:"/queue/",component:Gt},{name:"files",path:"/files/",component:Kt}],linkActiveClass:"active",linkExactActiveClass:"active"}),Wt=Object(T["a"])({state:function(){return{backendUrl:"http://127.0.0.1:8080/api/",pageHeader:"",updated:!1}},mutations:{setSystemInfo:function(e,t){e.backendUrl=t.backendUrl,e.updated=!0},setPageHeader:function(e,t){e.pageHeader=t},setBackendUrl:function(e,t){e.backendUrl=t}},actions:{updateSystemInfo:function(e){return Object(I["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,console.log("store/index updateSystemInfo"),a={backendUrl:"http://127.0.0.1:8080/api/"},"backendUrl"in localStorage?a.backendUrl=localStorage.getItem("backendUrl"):console.log("backendUrl not in localStorage"),n("setSystemInfo",a);case 5:case"end":return t.stop()}}),t)})))()},updatePageHeader:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,a("setPageHeader",t);case 2:case"end":return n.stop()}}),n)})))()},updateBackendUrl:function(e,t){return Object(I["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.commit,a("setBackendUrl",t);case 2:case"end":return n.stop()}}),n)})))()}},getters:{getBackendUrl:function(e){return e.backendUrl},getPageHeader:function(e){return e.pageHeader}}}),Zt={id:"main",class:"layout-horizontal"},Qt={class:"mb-4"},$t={key:0,class:"content-wrapper container"},en={class:"page-heading"},tn={class:"page-content"},nn={class:"row"},an={class:"col-12 col-lg-12"};function rn(e,t,n,r,c,s){var l=Object(a["x"])("HeaderLogo"),i=Object(a["x"])("HeaderMenu"),u=Object(a["x"])("router-view"),o=Object(a["x"])("Footer");return Object(a["s"])(),Object(a["e"])("div",Zt,[Object(a["f"])("header",Qt,[Object(a["h"])(l),Object(a["h"])(i)]),e.$store.state.updated?(Object(a["s"])(),Object(a["e"])("div",$t,[Object(a["f"])("div",en,[Object(a["f"])("h3",null,Object(a["z"])(e.$store.getters.getPageHeader),1)]),Object(a["f"])("div",tn,[Object(a["f"])("section",nn,[Object(a["f"])("div",an,[Object(a["h"])(u)])])])])):Object(a["d"])("",!0),Object(a["h"])(o)])}var cn=Object(a["f"])("div",{class:"container"},[Object(a["f"])("div",{class:"footer clearfix mb-0 text-muted"},[Object(a["f"])("div",{class:"float-start"},[Object(a["f"])("p",null,"2021 © footer start")]),Object(a["f"])("div",{class:"float-end"},[Object(a["f"])("p",null,"footer end")])])],-1),sn=[cn];function ln(e,t){return Object(a["s"])(),Object(a["e"])("footer",null,sn)}const un={},on=x()(un,[["render",ln]]);var dn=on,pn={class:"header-top"},_n={class:"container"},bn={class:"logo"},fn=Object(a["g"])("smevsign-web");function On(e,t){var n=Object(a["x"])("router-link");return Object(a["s"])(),Object(a["e"])("div",pn,[Object(a["f"])("div",_n,[Object(a["f"])("div",bn,[Object(a["h"])(n,{to:"/"},{default:Object(a["F"])((function(){return[fn]})),_:1})])])])}const gn={},mn=x()(gn,[["render",On]]);var vn=mn,jn={class:"main-navbar"},En={class:"container"},Cn={class:"menu-item"},hn=Object(a["f"])("i",{class:"fa fa-home"},null,-1),An=Object(a["f"])("span",null,"Home",-1),In={class:"menu-item"},Tn=Object(a["f"])("i",{class:"fa fa-pencil"},null,-1),Sn=Object(a["f"])("span",null,"CreateXml",-1),yn={class:"menu-item"},xn=Object(a["f"])("i",{class:"fa fa-file-text-o"},null,-1),Rn=Object(a["f"])("span",null,"SignXml",-1),Mn={class:"menu-item"},wn=Object(a["f"])("i",{class:"fa fa-file-text-o"},null,-1),kn=Object(a["f"])("span",null,"QueueXml",-1),Dn={class:"menu-item"},Nn=Object(a["f"])("i",{class:"fa fa-file"},null,-1),Pn=Object(a["f"])("span",null,"SignFile",-1),Ln={class:"menu-item has-sub"},Un=Object(a["f"])("a",{href:"#",class:"menu-link"},[Object(a["f"])("i",{class:"fa fa-gears"}),Object(a["f"])("span",null,"Support")],-1),Hn={class:"submenu"},Gn={class:"submenu-group-wrapper"},Fn={class:"submenu-group"},Bn={class:"submenu-item"},Yn=Object(a["g"])("submenu 1"),Vn={class:"submenu-item"},Xn=Object(a["g"])("submenu 2"),qn={class:"submenu-item"},zn=Object(a["g"])("submenu 3");function Kn(e,t){var n=Object(a["x"])("router-link");return Object(a["s"])(),Object(a["e"])("nav",jn,[Object(a["f"])("div",En,[Object(a["f"])("ul",null,[Object(a["f"])("li",Cn,[Object(a["h"])(n,{to:"/",class:"menu-link"},{default:Object(a["F"])((function(){return[hn,An]})),_:1})]),Object(a["f"])("li",In,[Object(a["h"])(n,{to:"/create",class:"menu-link"},{default:Object(a["F"])((function(){return[Tn,Sn]})),_:1})]),Object(a["f"])("li",yn,[Object(a["h"])(n,{to:"/sign",class:"menu-link"},{default:Object(a["F"])((function(){return[xn,Rn]})),_:1})]),Object(a["f"])("li",Mn,[Object(a["h"])(n,{to:"/queue",class:"menu-link"},{default:Object(a["F"])((function(){return[wn,kn]})),_:1})]),Object(a["f"])("li",Dn,[Object(a["h"])(n,{to:"/files",class:"menu-link"},{default:Object(a["F"])((function(){return[Nn,Pn]})),_:1})]),Object(a["f"])("li",Ln,[Un,Object(a["f"])("div",Hn,[Object(a["f"])("div",Gn,[Object(a["f"])("ul",Fn,[Object(a["f"])("li",Bn,[Object(a["h"])(n,{to:"/",class:"submenu-link"},{default:Object(a["F"])((function(){return[Yn]})),_:1})]),Object(a["f"])("li",Vn,[Object(a["h"])(n,{to:"/",class:"submenu-link"},{default:Object(a["F"])((function(){return[Xn]})),_:1})]),Object(a["f"])("li",qn,[Object(a["h"])(n,{to:"/",class:"submenu-link"},{default:Object(a["F"])((function(){return[zn]})),_:1})])])])])])])])])}const Jn={},Wn=x()(Jn,[["render",Kn]]);var Zn=Wn,Qn={setup:function(){var e=Object(T["b"])();Object(a["o"])((function(){console.log("App onBeforeMount"),e.dispatch("updateSystemInfo")}))},components:{Footer:dn,HeaderLogo:vn,HeaderMenu:Zn}};const $n=x()(Qn,[["render",rn]]);var ea=$n,ta=Object(a["c"])(ea);ta.use(Jt),ta.use(Wt),ta.mount("#app")}});
//# sourceMappingURL=app.547ea241.js.map